{"version":3,"sources":["admin/email/sent_mail.js"],"names":["send_mail","axios","faxios","state","groups","draft","subject","body","files","componentDidMount","_this","draftId","props","match","params","id","document","querySelector","group","get","then","d","data","console","log","setState","Object","_home_nvrgup_Desktop_ca_mail_frontend_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","concat","innerHTML","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","key","value","this","forEach","ele","push","name","subs","attachments","map","href","file","split","pop","onClick","history","goBack","sentTo","length","Component"],"mappings":"6MAGqBA,6MACjBC,MAAQC,gBACRC,MAAQ,CACJC,OAAQ,GACRC,MAAO,CACHC,QAAS,GACTC,KAAM,GACNC,MAAO,OAIfC,kBAAoB,WAChBC,EAAKC,QAAUD,EAAKE,MAAMC,MAAMC,OAAOC,GACvCL,EAAKV,UAAYgB,SAASC,cAAc,cACxCP,EAAKH,KAAOG,EAAKV,UAAUiB,cAAc,SACzCP,EAAKQ,MAAQR,EAAKV,UAAUiB,cAAc,UAG1CP,EAAKT,MAAMkB,IAAI,cACVC,KAAK,SAAAC,GACFA,EAAIA,EAAEC,KACNC,QAAQC,IAAIH,GACZX,EAAKe,SAALC,OAAAC,EAAA,EAAAD,CAAA,GACOhB,EAAKP,MADZ,CAEIC,OAAQiB,OAIpBX,EAAKT,MAAMkB,IAAX,aAAAS,OAA4BlB,EAAKC,QAAjC,MACKS,KAAK,SAAAC,GACFA,EAAIA,EAAEC,KACNC,QAAQC,IAAIH,GACZX,EAAKH,KAAKsB,UAAYR,EAAEd,KACxBG,EAAKe,SAALC,OAAAC,EAAA,EAAAD,CAAA,GACOhB,EAAKP,MADZ,CAEIE,MAAOgB,gFAMnB,IAAMjB,EAAS,CAAC0B,EAAAC,EAAAC,cAAA,UACZC,UAAU,eACVC,IAAK,EACLC,MAAO,GAHK,eAKhBC,KAAKjC,MAAMC,OAAOiC,QAAQ,SAAAC,GAAG,OACzBlC,EAAOmC,KAAKT,EAAAC,EAAAC,cAAA,UACRC,UAAU,eACVC,IAAKI,EAAIvB,GACToB,MAAOG,EAAIvB,IAAKuB,EAAIE,KAHZ,KAGoBF,EAAIG,KAHxB,QAMhB,IAAMC,EAAcN,KAAKjC,MAAME,MAAMG,MAAMmC,IAAI,SAAAL,GAAG,OAAIR,EAAAC,EAAAC,cAAA,MAAIE,IAAKI,EAAIvB,IAC/De,EAAAC,EAAAC,cAAA,KAAGY,KAAMN,EAAIO,MAAOP,EAAIO,KAAKC,MAAM,KAAKC,UAG5C,OACIjB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBACXH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qDACXH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,IAAd,aACAH,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,UACIgB,QAASZ,KAAKxB,MAAMqC,QAAQC,OAC5BjB,UAAU,YACVH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,qBAHjB,WAORH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACXH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACXH,EAAAC,EAAAC,cAAA,SAAOC,UAAU,oBAAjB,aACAH,EAAAC,EAAAC,cAAA,gBAAQI,KAAKjC,MAAME,MAAM8C,SAE7BrB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACXH,EAAAC,EAAAC,cAAA,SAAOC,UAAU,oBAAjB,mBACAH,EAAAC,EAAAC,cAAA,gBAAQI,KAAKjC,MAAME,MAAMa,QAE7BY,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACXH,EAAAC,EAAAC,cAAA,SAAOC,UAAU,oBAAjB,YACAH,EAAAC,EAAAC,cAAA,QAAMC,UAAU,WAAhB,IAA4BG,KAAKjC,MAAME,MAAMC,UAEjDwB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACXH,EAAAC,EAAAC,cAAA,SAAOC,UAAU,oBAAjB,SACAH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UAEnBH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACXH,EAAAC,EAAAC,cAAA,SAAOC,UAAU,oBAAjB,gBACAH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,eAAeS,EAAYU,OAASV,EAAa,4BAxFhDW","file":"static/js/5.f6463551.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport faxios from '../../axios'\n\nexport default class send_mail extends Component {\n    axios = faxios()\n    state = {\n        groups: [],\n        draft: {\n            subject: '',\n            body: '',\n            files: []\n        }\n    }\n\n    componentDidMount = () => {\n        this.draftId = this.props.match.params.id\n        this.send_mail = document.querySelector('.send-mail');\n        this.body = this.send_mail.querySelector('.body');\n        this.group = this.send_mail.querySelector('#group');\n\n\n        this.axios.get('api/group/')\n            .then(d => {\n                d = d.data\n                console.log(d)\n                this.setState({\n                    ...this.state,\n                    groups: d\n                })\n            })\n\n        this.axios.get(`api/draft/${this.draftId}/`)\n            .then(d => {\n                d = d.data\n                console.log(d)\n                this.body.innerHTML = d.body\n                this.setState({\n                    ...this.state,\n                    draft: d\n                })\n            })\n    }\n\n    render() {\n        const groups = [<option\n            className='form-control'\n            key={0}\n            value={0}>--choose--</option>]\n\n        this.state.groups.forEach(ele =>\n            groups.push(<option\n                className='form-control'\n                key={ele.id}\n                value={ele.id}>{ele.name} ({ele.subs})</option>)\n        )\n\n        const attachments = this.state.draft.files.map(ele => <li key={ele.id}>\n            <a href={ele.file}>{ele.file.split('/').pop()}</a>\n        </li>)\n\n        return (\n            <div className='send-mail p-1 p-md-5'>\n                <div className=\"d-flex justify-content-between align-items-center\">\n                    <h1 className=\"\">Send Mail</h1>\n                    <div>\n                        <button\n                            onClick={this.props.history.goBack}\n                            className=\"btn mx-2\">\n                            <i className=\"fa fa-arrow-left\"></i > back\n                        </button>\n                    </div>\n                </div>\n                <div className=\"info mt-4\">\n                    <div className=\"form-group\">\n                        <label className='font-weight-bold'>Sent to: </label>\n                        <span> {this.state.draft.sentTo}</span>\n                    </div>\n                    <div className=\"form-group\">\n                        <label className='font-weight-bold'>Sent to group: </label>\n                        <span> {this.state.draft.group}</span>\n                    </div>\n                    <div className=\"form-group\">\n                        <label className='font-weight-bold'>Subject:</label>\n                        <span className=\"subject\"> {this.state.draft.subject}</span>\n                    </div>\n                    <div className=\"form-group\">\n                        <label className='font-weight-bold'>Body:</label>\n                        <div className=\"body\"></div>\n                    </div>\n                    <div className=\"form-group\">\n                        <label className='font-weight-bold'>Attachments:</label>\n                        <ol className=\"attachments\">{attachments.length ? attachments: 'no attachments'}</ol>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n"],"sourceRoot":""}