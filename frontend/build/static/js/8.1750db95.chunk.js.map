{"version":3,"sources":["admin/subscriber/file_upload.js","admin/subscriber/toolbar.js","admin/subscriber/group.js"],"names":["FileUpload","state","progress","onprogress","selectFilesHandler","e","preventDefault","fi","document","createElement","type","accept","click","addEventListener","file","target","files","_this","uploadFileHandler","data","FormData","request","XMLHttpRequest","console","log","props","append","selected_group_id","res","response","get_subs","update_groups","setState","Object","objectSpread","upload","loaded","total","responseType","open","burl","setRequestHeader","sessionStorage","send","btn_text","this","String","toFixed","react_default","a","className","disabled","onClick","Component","toolbar","axios","faxios","componentDidMount","new_sub","querySelector","new_sub_name","new_sub_email","new_sub_mobile","add_sub_to_group_handler","post","groupId","name","value","email","mobile","then","d","delete_group_handler","selected_group_name","group_2_delete","set_groups_state","delete","concat","download_group_csv_handler","anchor","href","new_sub_input","autoComplete","key","placeholder","file_upload_FileUpload","group","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","get","page","group_id","_unblock_subscriber","sub","put","id","status","flag","_delete_subscriber","results","length","change_page","url","pgno","next","previous","_edit_subscriber","sub_id","subs","selected_sub_index","findIndex","onedit","_edit_sub_change","inputname","upload_subs","_this2","subs_list","map","i","onChange","edit_subscriber_html","show_subscriber_html","pagination","count","toolbar_toolbar","assign"],"mappings":"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","file":"static/js/8.1750db95.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { burl } from '../../axios'; \n\nexport default class FileUpload extends Component {\n    state = {\n        progress: 0,\n        onprogress: false,\n    }\n\n    selectFilesHandler = e => {\n        e.preventDefault()\n\n        let fi = document.createElement('input')\n        fi.type = 'file'\n        fi.accept = '.csv'\n        fi.click()\n\n        fi.addEventListener('change', e => {\n            let file = e.target.files[0]\n            this.uploadFileHandler(file)\n        })\n    }\n\n    uploadFileHandler = (file) => {\n\n        var data = new FormData();\n        var request = new XMLHttpRequest();\n        console.log(this.props)\n        data.append('group_id', this.props.selected_group_id)\n        data.append('file', file);\n\n        // load event\n        request.addEventListener('load', (e) => {\n            let res = e.target.response\n            console.log(res);\n\n            this.props.get_subs()\n            this.props.update_groups()\n            this.setState({\n                ...this.state,\n                onprogress: false\n            })\n        });\n\n        // monitor progress of upload\n        request.upload.addEventListener('progress', (e) => {\n            var progress = (e.loaded / e.total) * 100\n            console.log(progress)\n            this.setState({\n                ...this.state,\n                progress\n            })\n        })\n\n        request.responseType = 'json';\n        request.open('post', burl + 'api/sub_as_csv/');\n        request.setRequestHeader('Authorization',sessionStorage['token'])\n        request.send(data);\n\n        this.setState({\n            ...this.state,\n            onprogress: true,\n        })// end of setstate\n        console.log('upload started', this.state)\n    }\n\n    render() {\n        // let error = <\n\n        let btn_text = this.state.onprogress ?\n            String(this.state.progress.toFixed(0)) :\n            <i className=\"fa fa-upload\"></i>\n\n\n        return (\n            <div className=''>\n                <div className=\"new_sub_csv d-flex justify-content-between align-items-center\">\n                    <div className='text-left'>\n                        Upload a .csv with fields email, name, mobile\n                    </div>\n                    <button\n                        disabled={this.state.onprogress ? true : false}\n                        onClick={this.selectFilesHandler}\n                        className=\"btn nbtn green\">\n                        {btn_text}\n                    </button>\n                </div>\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport UploadCSV from './file_upload'\nimport faxios, { burl } from '../../axios';\n\nexport default class toolbar extends Component {\n    axios = faxios()\n    state = {}\n\n    componentDidMount = () => {\n\n        this.new_sub = document.querySelector('.new_sub');\n        this.new_sub_name = this.new_sub.querySelector('.new_sub_name');\n        this.new_sub_email = this.new_sub.querySelector('.new_sub_email');\n        this.new_sub_mobile = this.new_sub.querySelector('.new_sub_mobile');\n\n        console.log(this.props)\n    }\n\n    add_sub_to_group_handler = (e) => {\n        e.preventDefault()\n        this.axios.post('api/add_sub_to_group/', {\n            groupId: this.props.selected_group_id,\n            name: this.new_sub_name.value,\n            email: this.new_sub_email.value,\n            mobile: this.new_sub_mobile.value\n        }).then(d => {\n            this.new_sub_name.value = ''\n            this.new_sub_email.value =  ''\n            this.new_sub_mobile.value =  ''\n            // update sub list\n            this.props.get_subs()\n            // update the groups badges\n            this.props.update_groups()\n        })\n    }\n\n    delete_group_handler = (e) => {\n        e.preventDefault()\n        if (this.props.selected_group_name === 'Subscribers') {\n            return\n        }\n\n        let group_2_delete = this.props.selected_group_id\n\n        this.props.set_groups_state({\n            selected_group_id: null,\n            selected_group_name: 'Subscribers'\n        })\n\n        this.axios.delete(`api/group/${group_2_delete}/`)\n            .then(d => {\n                console.log(d.data)\n                this.props.update_groups()\n                // this.props.get_subs()\n            })\n    }\n\n    download_group_csv_handler = () => {\n        let anchor = document.createElement('a')\n        anchor.href = burl + `api/download_group_as_csv/${this.props.selected_group_id}/`\n        anchor.click()\n    }\n\n\n    render() {\n        let new_sub_input =\n            <form autoComplete='false' className={'d-flex new_sub align-items-center px-1 py-2'} key={1}>\n                {/* <div className='sno px-2 font-weight-bold'>{1}</div> */}\n                <div className='flex-grow-1 d-flex align-items-center flex-wrap justify-content-between'>\n                    {/* email */}\n                    <input\n                        type=\"email\"\n                        className=\"new_sub_email tab_input tab_input_sm mt-2\"\n                        placeholder=\"Email\" />\n                    {/* username */}\n                    <input\n                        type=\"text\"\n                        className=\"new_sub_name tab_input tab_input_sm mt-2\"\n                        placeholder=\"Name\" />\n                    {/* mobile */}\n                    <input\n                        type=\"mobile\"\n                        className=\"new_sub_mobile tab_input tab_input_sm mt-2\"\n                        placeholder=\"Mobile number\" />\n                </div>\n                <div className='create-sub create'>\n                    <button\n                        onClick={this.add_sub_to_group_handler}\n                        className=\"btn nbtn green\">\n                        <i className=\"fa fa-plus\"></i>\n                    </button>\n                </div>\n            </form>\n\n        return (\n            <div className='toolbar tab p-3'>\n                {/* new sub via input */}\n                <div>\n                    <div className=\"font-weight-bold\">New subscriber:</div>\n                    {new_sub_input}\n                </div>\n                {/* upload csv */}\n                <div>\n                    <div className=\"font-weight-bold mt-2\">Upload subscribers as CSV:</div>\n                    <UploadCSV {...this.props} />\n                </div>\n                {/* download csv */}\n                <div>\n                    <div className=\"font-weight-bold mt-2\">Download subscribers as CSV:</div>\n                    <div className=\"d-flex justify-content-between align-items-center\">\n                        <div>\n                            Click here to download .csv of the subscribers of this group\n                        </div>\n                        <button\n                            onClick={this.download_group_csv_handler}\n                            className=\"btn nbtn blue\">\n                            <i className=\"fa fa-download\"></i>\n                        </button>\n                    </div>\n                </div>\n                {/* delete current group */}\n                <div>\n                    <div className=\"font-weight-bold mt-2\">Delete current group:</div>\n                    <div className=\"d-flex justify-content-between align-items-center\">\n                        <div>\n                            This will only delete the group not the subscribers\n                        </div>\n                        <button\n                            disabled={this.props.selected_group_name === 'Subscribers' ? true : false}\n                            onClick={this.delete_group_handler}\n                            className=\"btn nbtn red\">\n                            <i className=\"fa fa-trash\"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","\nimport React, { Component } from 'react'\nimport Toolbar from './toolbar'\nimport faxios from '../../axios'; \n\nexport default class group extends Component {\n    axios = faxios()\n    constructor(props) {\n        super(props)\n        this.state = {\n            next: null,\n            previous: null,\n            results: [],\n            page: 1,\n            upload_subs: 0,\n        }\n    }\n\n    componentDidMount = () => {\n        this.get_subs()\n    }\n\n    get_subs = () => {\n        this.axios.get(`api/group/${this.props.selected_group_id}/`)\n            .then(d => {\n                console.log(d.data)\n                this.setState({\n                    ...this.state,\n                    ...d.data,\n                    page: 1,\n                    group_id: this.props.selected_group_id,\n                })\n            })\n    }\n\n    _unblock_subscriber  = (e,sub) => {\n        e.preventDefault()\n        this.axios.put(`api/all_subs/${sub.id}/`, {\n            status: 'available',\n            flag: false,\n            email: sub.email,\n            group: sub.group\n        }).then(d => {\n            this.get_subs() \n        })\n    }\n\n    _delete_subscriber = (e, sub) => {\n        e.preventDefault()\n\n        this.axios.delete(`api/all_subs/${sub.id}/`)\n            .then(d => {\n                console.log('flagged')\n                if (this.state.results.length === 1 && this.state.page > 1) {\n                    this.setState({\n                        ...this.state,\n                        page: this.state.page - 1\n                    })// end of setstate\n                }\n                this.get_subs()\n                this.props.update_groups()\n            })\n    }\n\n    change_page = (e, id) => {\n        e.preventDefault()\n        let url\n        let pgno = this.state.page\n\n\n        if (id) {\n            url = this.state.next\n            pgno += 1\n        } else if (!id) {\n            url = this.state.previous\n            pgno -= 1\n        } else {\n            return\n        }\n\n        this.axios.get(url)\n            .then(d => {\n                console.log(d)\n                this.setState({\n                    ...this.state,\n                    ...d.data,\n                    page: pgno\n                })// end of setstate\n            })\n    }\n\n    _edit_subscriber = (e,sub_id) => {\n        e.preventDefault()\n\n        let subs = this.state.results\n        const selected_sub_index = subs.findIndex(sub => sub.id===sub_id)\n        subs[selected_sub_index].onedit = true\n        this.setState({\n            results: subs\n        })\n\n        console.log(subs)\n    }\n\n    _edit_sub_change = (e, inputname, sub_id) => {\n        e.preventDefault()\n\n        let subs = this.state.results\n        const selected_sub_index = subs.findIndex(sub => sub.id===sub_id)\n        subs[selected_sub_index][inputname] = e.target.value\n        this.setState({\n            results: subs\n        })\n    }\n\n    render() {\n        console.log(this.state)\n        // when user switch groups this will fire\n        if (this.state.group_id !== this.props.selected_group_id) {\n            this.get_subs()\n        }\n \n        let show_subscriber_html =  (sub,i) =>       \n        <div className={'d-flex  tab align-items-center '} key={i + 1}>\n            <div className='sub_sno px-2 font-weight-bold'>{i + 1}</div>\n            <div className='sub_phone px-2'>\n                <i className={`fa fa-circle ${sub.status === 'available' ? 'text-success' : 'text-danger'}`}></i>\n            </div>\n            <div className='sub_email px-2'>{sub.email}</div>\n            <div className='sub_name px-2'>{sub.name}</div>\n            <div className='sub_phone px-2 flex-grow-1'>{sub.mobile}</div>\n            {sub.status !== 'available' ? <button\n                onClick={e => this._unblock_subscriber(e, sub)}\n                className={`btn mx-1 nbtn green`}>\n                <i className='fa fa-check'></i>\n            </button> : null}\n            <button\n                onClick={e => this._edit_subscriber(e, sub.id)}\n                className={`btn mx-1 nbtn blue`}>\n                <i className='fa fa-pen'></i>\n            </button>\n            <button\n                onClick={e => this._delete_subscriber(e, sub)}\n                className={`btn mx-1 nbtn red`}>\n                <i className='fa fa-trash'></i>\n            </button>\n        </div>  \n\n        let edit_subscriber_html = (sub,i) =>    \n        <div className={'d-flex  tab align-items-center '} key={i + 1}>\n            <div className='sub_sno px-2 font-weight-bold'>{i + 1}</div>\n            <div className='sub_phone px-2'>\n                <i className={`fa fa-circle ${sub.status === 'available' ? 'text-success' : 'text-danger'}`}></i>\n            </div>\n            <div className='sub_email px-2'><input type=\"email\" placeholder='Email' onChange={e=>this._edit_sub_change(e,'email', sub.id)} value={sub.email}/></div>\n            <div className='sub_name px-2'><input type=\"text\" placeholder='Name' onChange={e=>this._edit_sub_change(e,'name', sub.id)} value={sub.name}/></div>\n            <div className='sub_phone px-2 flex-grow-1'><input type=\"text\" placeholder='Phone no.' onChange={e=>this._edit_sub_change(e,'mobile', sub.id)} value={sub.mobile}/></div>\n            <button\n                onClick={e => this._unblock_subscriber(e, sub)}\n                className={`btn mx-1 nbtn green`}>\n                <i className='fa fa-check'></i>\n            </button>\n        </div>\n\n\n        let subs = this.state.results\n        let subs_list = subs.map((sub, i) => {\n            if(sub.onedit === true){\n                return edit_subscriber_html(sub,i)\n            }else {\n                return show_subscriber_html(sub,i)\n            }\n        })\n\n        let pagination =\n            <div className=\"d-flex justify-content-between align-items-center\">\n                <div className=\"font-weight-bold p-3\">Subscribers: {this.state.count}</div>\n                <div className=\"sub-pagination pagination\">\n                    <span className='mx-1'>\n                        Page {this.state.page}\n                    </span>\n                    <button\n                        disabled={this.state.previous ? false : true}\n                        onClick={e => this.change_page(e, 0)}\n                        className=\"btn nbtn blue mx-1\">\n                        <i className=\"fa fa-angle-left\"></i>\n                    </button>\n                    <button\n                        disabled={this.state.next ? false : true}\n                        onClick={e => this.change_page(e, 1)}\n                        className=\"btn nbtn blue mx-1\">\n                        <i className=\"fa fa-angle-right\"></i>\n                    </button>\n                </div>\n            </div>\n\n        return (\n            <div>\n                <div className=''>\n                    <Toolbar\n                        {...this.props}\n                        get_subs={this.get_subs} />\n                    {pagination}\n                    {subs_list}\n                    {this.state.results.length>10 ? pagination : null}\n                </div>\n            </div>\n        )\n    }\n}\n"],"sourceRoot":""}