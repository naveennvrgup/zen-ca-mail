(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){},103:function(e,t,a){},105:function(e,t,a){},221:function(e,t,a){e.exports=a.p+"static/media/logo.f259361c.png"},222:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(27),l=a.n(s),c=(a(101),a(1)),i=a(2),o=a(4),u=a(3),m=a(5),d=a(227),p=a(224),f=(a(103),a(105),a(223)),b=a(226),h=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){var e=document.querySelectorAll(".sidebar a");document.querySelector(".sidebar").style.height="100vh",e.forEach(function(e){e.href.split("/").pop()===a.props.location.pathname.split("/").pop()?e.parentElement.classList.add("active"):e.parentElement.classList.remove("active")}),e.forEach(function(t){t.addEventListener("click",function(a){e.forEach(function(e){return e.parentElement.classList.remove("active")}),t.parentElement.classList.add("active")})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"sidebar pt-5"},r.a.createElement("div",{className:"link w-100"},r.a.createElement(f.a,{to:"/admin/"},r.a.createElement("i",{className:"far fa-chart-bar"}),r.a.createElement("span",null,"Dashboard"))),r.a.createElement("div",{className:"link w-100"},r.a.createElement("i",{className:"fa fa-users"}),r.a.createElement(f.a,{to:"/admin/group"},"Subscribers")),r.a.createElement("div",{className:"link w-100"},r.a.createElement("i",{className:"far fa-newspaper"}),r.a.createElement(f.a,{to:"/admin/news"},"Newsfeed")),r.a.createElement("div",{className:"link w-100"},r.a.createElement("i",{className:"far fa-envelope"}),r.a.createElement(f.a,{to:"/admin/email"},"E-mail")),r.a.createElement("div",{className:"link w-100"},r.a.createElement("i",{className:"fas fa-inbox"}),r.a.createElement(f.a,{to:"/admin/outbox"},"Outbox")),r.a.createElement("div",{className:"link w-100"},r.a.createElement("i",{className:"fas fa-rocket"}),r.a.createElement(f.a,{to:"/admin/sent"},"Sent Mail")),r.a.createElement("div",{className:"link w-100"},r.a.createElement("i",{className:"fa fa-cog"}),r.a.createElement(f.a,{to:"/admin/settings"},"Settings")),r.a.createElement("div",{className:"link w-100"},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),r.a.createElement(f.a,{to:"/admin/signout"},"Signout")))}}]),t}(n.Component),v=Object(b.a)(h),g=a(92),E="http://localhost:8000/";E="/";var N=a.n(g).a.create({baseURL:E,headers:{}}),j=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={drafts:[]},a.componentDidMount=function(){N.get("api/draft/").then(function(e){e=e.data,console.log(e),a.setState({drafts:e.filter(function(e){return 0===e.status})})}).catch(function(e){return console.error(e)})},a.newMailHandler=function(e){e.preventDefault(),fetch(E+"api/draft/",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify()}).then(function(e){return e.json()}).then(function(e){console.log(e),a.props.history.push("/admin/email/"+e.id)}).catch(function(e){return console.error(e)})},a.deleteDraftHandler=function(e,t){e.preventDefault(),t||(t=e.target.parentElement.parentElement.dataset.sid),N.delete("api/draft/"+t+"/").then(function(e){var n=a.state.drafts.filter(function(e){return e.id!==Number(t)});a.setState({drafts:n})}).catch(function(e){return console.error(e)}),console.log(t)},a.createDraftView=function(e,t){return r.a.createElement("div",{className:"d-flex align-items-center justify-content-between email",key:e.id},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("div",{className:"srno font-weight-bold"},t+1),r.a.createElement("div",{className:"subject"},e.subject),r.a.createElement("div",{className:"date"},"(",e.edited_on,")")),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("button",{onClick:function(t){return a.send2EditHandler(t,e.id)},className:"btn edit"},r.a.createElement("i",{className:"fas fa-pen-alt"})),r.a.createElement("button",{onClick:function(t){return a.deleteDraftHandler(t,e.id)},className:"btn delete"},r.a.createElement("i",{className:"fas fa-times"}))))},a.send2EditHandler=function(e,t){e.preventDefault(),a.props.history.push("/admin/email/".concat(t,"/"))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.drafts;return t=t.map(function(t,a){return e.createDraftView(t,a)}),r.a.createElement("div",{className:"emails p-5"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},r.a.createElement("h1",{className:""},"E-mail"),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-success",onClick:this.newMailHandler},"New Mail"))),r.a.createElement("div",{className:"d-flex text-muted"},r.a.createElement("div",{className:"p-3"},r.a.createElement("span",{className:"font-weight-bold"},"Total drafts: "),this.state.drafts.length)),r.a.createElement("div",{className:"mt-5"}),r.a.createElement("div",null,t))}}]),t}(n.Component),_=a(56),O=a.n(_),w=a(93),y=a(10),k=(a(130),a(41)),x=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={files:[]},a.componentDidMount=function(){var e=a.props.initialFiles;console.log(e),e=e.map(function(e){return{id:e.id,url:e.file,progess:"100%",name:e.file.split("/").pop(),saved:!0}}),a.setState(Object(y.a)({},a.state,{files:e}))},a.selectFilesHandler=function(e){e.preventDefault();var t=document.createElement("input");t.type="file",t.multiple=!0,t.click(),t.addEventListener("change",function(e){for(var n=Object(k.a)(a.state.files),r=function(e){var a=t.files[e],r=!0;n.forEach(function(e){e.name===a.name&&(r=!1)}),r&&n.push({file:a,name:a.name,progress:0})},s=0;s<t.files.length;s++)r(s);a.setState(Object(y.a)({},a.state,{files:n}))})},a.uploadFileHandler=function(e,t){e.preventDefault();var n=new FormData,r=new XMLHttpRequest;n.append("file",t.file),n.append("draft",a.props.draftId),r.addEventListener("load",function(e){var n=e.target.response;console.log(n),a.setState({files:a.state.files.map(function(e){return e.name===t.name?Object(y.a)({},e,{saved:!0,progress:"100%",url:n.file,id:n.id}):e})})}),r.upload.addEventListener("progress",function(e){var n=e.loaded/e.total*100+"%";a.setState({files:a.state.files.map(function(e){return e.name===t.name?Object(y.a)({},e,{progress:n}):e})})}),r.responseType="json",r.open("post","http://localhost:8000/api/attachment/"),r.send(n),a.setState({files:a.state.files.map(function(e){return e.name===t.name?Object(y.a)({},e,{request:r}):e})})},a.deleteFileHandler=function(e,t){e.preventDefault(),N.delete("api/attachment/".concat(t.id,"/")).then(function(e){e=e.data;var n=a.state.files.filter(function(e){return e.id!==t.id});a.setState({files:n})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:"alert alert-warning"},"No attachments yet");return this.state.files.length>0&&(t=[],this.state.files.forEach(function(a,n){console.log(a);var s=r.a.createElement("button",{className:"btn green",onClick:function(t){return e.uploadFileHandler(t,a)}},r.a.createElement("i",{className:"fa fa-upload"})),l="inprogess";a.progess||(l="waiting"),a.saved&&(l=r.a.createElement("a",{href:a.url,target:"_blank",rel:"noopener noreferrer"},"FId: ",a.id)),(a.progress||a.id)&&(s=r.a.createElement("button",{className:"btn red",onClick:function(t){return e.deleteFileHandler(t,a)}},r.a.createElement("i",{className:"fa fa-times"}))),t.push(r.a.createElement("div",{className:"d-flex file p-2",key:a.name},r.a.createElement("div",{className:"name"},a.name),r.a.createElement("div",{className:"fid"},l),r.a.createElement("div",null,r.a.createElement("div",{className:"progress  ".concat(a.saved?"hide-progress":"")},r.a.createElement("div",{className:"progress-bar progress-bar-striped m-0",style:{width:a.progress}}))),r.a.createElement("div",{className:"action"},s)))})),r.a.createElement("div",{className:"fileUpload"},r.a.createElement("div",{className:"d-flex align-items-center mt-3"},r.a.createElement("div",null,r.a.createElement("label",{className:"font-weight-bold mx-3 my-4"},"Attachments:")),r.a.createElement("div",null,r.a.createElement("button",{className:"btn blue",onClick:this.selectFilesHandler},r.a.createElement("i",{className:"fa fa-plus"})))),r.a.createElement("div",{className:"files"},t))}}]),t}(n.Component),S=a(24),C=a(94),D=a(95),H=a.n(D),M=a(57),q=a.n(M),L=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.subject=document.querySelector("#subject"),a.files=document.querySelector(".files"),a.draftId=a.props.match.params.id,localStorage.setItem("currDraft",a.draftId),N.get("api/draft/"+a.draftId+"/").then(function(e){e=e.data,a.html2Draft(e.body),a.subject.value=e.subject,console.log(e),a.setState(Object(y.a)({},a.state,e))})},a.onEditorStateChange=function(e){a.setState({editorState:e})},a.draft2Html=function(){var e=a.state.editorState;return H()(Object(S.convertToRaw)(e.getCurrentContent()))},a.html2Draft=function(e){var t=q()(e);if(t){var n=S.ContentState.createFromBlockArray(t.contentBlocks),r=S.EditorState.createWithContent(n);a.setState({editorState:r})}},a.saveDraftHandler=function(e,t){e.preventDefault(),N.put("api/draft/"+a.draftId+"/",{subject:a.subject.value,body:a.draft2Html()}).then(function(e){t||a.props.history.push("/admin/email/")})},a.sendMailHandler=function(){var e=Object(w.a)(O.a.mark(function e(t){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.saveDraftHandler(t,!0);case 3:N.post("api/outbox/",{draft:localStorage.getItem("currDraft")}).then(function(e){console.log(e.data),a.props.history.push("/admin/email/")});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.deleteDraftHandler=function(e){e.preventDefault(),N.delete("api/draft/"+a.draftId+"/").then(function(e){console.log(e.data),a.props.history.push("/admin/email/")})};var n=q()("<p>loading please wait...</p>");if(n){var r=S.ContentState.createFromBlockArray(n.contentBlocks),s=S.EditorState.createWithContent(r);a.state={editorState:s,files:!1}}return a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=r.a.createElement("h1",null,this.draftId?"Edit Mail":"New Email");if(this.state.status){e=r.a.createElement("div",{className:"mb-5"},r.a.createElement("h1",{className:""},1===this.state.status?"Mail in outbox":"Sent mail"," id: ",this.state.id),r.a.createElement("div",{className:"text-muted"},r.a.createElement("div",null,"Sending to ",this.state.sentTo," subscribers"),r.a.createElement("div",null,"Last edit on at ",this.state.edited_on)));var t=document.querySelector(".body");t.innerHTML=this.state.body;var a=this.state.files;if(a.length){t.innerHTML+='<p class="font-weight-bold">Attachments:</p>';for(var n=0;n<a.length;n++)t.innerHTML+="<a href='".concat(this.state.files[n].file,"' class='d-block' target='_blank' download>\n                        ").concat(a[n].file.split("/").pop(),"\n                    </a>")}}return r.a.createElement("div",{className:"newMail p-5"},r.a.createElement("form",{className:"ml-3"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},e,r.a.createElement("div",{className:"buttons py-3 ".concat(this.state.status?"d-none":"d-flex")},r.a.createElement("button",{className:"btn btn-outline-danger mr-3",onClick:this.deleteDraftHandler},"delete"),r.a.createElement("button",{className:"btn mr-3",onClick:this.saveDraftHandler},"save"),r.a.createElement("button",{className:"btn btn-success",onClick:this.sendMailHandler},"send"))),r.a.createElement("div",{className:"form-group mt-3"},r.a.createElement("label",{htmlFor:"subject",className:"font-weight-bold"},"Subject:"),r.a.createElement("input",{status:this.state.status,type:"text",id:"subject",className:"form-control w-100"})),r.a.createElement("label",{className:"font-weight-bold mt-2"},"Body:"),r.a.createElement("div",{className:"body"},r.a.createElement(C.Editor,{status:this.state.status,editorState:this.state.editorState,onEditorStateChange:this.onEditorStateChange})),this.state.files&&!this.state.status?r.a.createElement(x,{draftId:this.draftId,initialFiles:this.state.files}):""))}}]),t}(n.Component),A=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={drafts:[]},a.componentDidMount=function(){N.get("api/draft/").then(function(e){e=e.data,a.setState({drafts:e.filter(function(e){return 1===e.status})})}).catch(function(e){return console.error(e)})},a.createDraftView=function(e,t){return r.a.createElement("div",{className:"d-flex align-items-center justify-content-between draft",key:e.id},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("div",{className:"srno font-weight-bold"},t+1),r.a.createElement("div",{className:"subject"},e.subject),r.a.createElement("div",{className:"date"},"(",e.edited_on,")")),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("button",{onClick:function(t){return a.send2EditHandler(t,e.id)},className:"btn blue"},r.a.createElement("i",{className:"fas fa-glasses"}))))},a.send2EditHandler=function(e,t){e.preventDefault(),a.props.history.push("/admin/newMail/".concat(t,"/"))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.drafts;return t=t.map(function(t,a){return e.createDraftView(t,a)}),r.a.createElement("div",{className:"email p-5"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},r.a.createElement("h1",{className:""},"Outbox"),r.a.createElement("div",null)),r.a.createElement("div",{className:"d-flex text-muted"},r.a.createElement("div",{className:"p-3"},r.a.createElement("span",{className:"font-weight-bold"},"Total mail on outbox: "),this.state.drafts.length)),r.a.createElement("div",{className:"mt-5"}),r.a.createElement("div",null,t))}}]),t}(n.Component),F=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={drafts:[]},a.componentDidMount=function(){N.get("api/draft/").then(function(e){e=e.data,a.setState({drafts:e.filter(function(e){return 2===e.status})}),console.log(e)}).catch(function(e){return console.error(e)})},a.createDraftView=function(e,t){return r.a.createElement("div",{className:"d-flex align-items-center justify-content-between draft",key:e.id},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("div",{className:"srno font-weight-bold"},t+1),r.a.createElement("div",{className:"subject"},e.subject)),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("button",{onClick:function(t){return a.send2EditHandler(t,e.id)},className:"btn blue"},r.a.createElement("i",{className:"fas fa-glasses"})),r.a.createElement("button",{onClick:function(t){return a.deleteDraftHandler(t,e.id)},className:"btn red"},r.a.createElement("i",{className:"fas fa-trash"}))))},a.deleteDraftHandler=function(e,t){e.preventDefault(),t||(t=e.target.parentElement.parentElement.dataset.sid),N.delete("api/draft/"+t+"/").then(function(e){var n=a.state.drafts.filter(function(e){return e.id!==Number(t)});a.setState({drafts:n})}).catch(function(e){return console.error(e)}),console.log(t)},a.send2EditHandler=function(e,t){e.preventDefault(),a.props.history.push("/admin/newMail/".concat(t,"/"))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.drafts;return t=t.map(function(t,a){return e.createDraftView(t,a)}),r.a.createElement("div",{className:"email p-5"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},r.a.createElement("h1",{className:""},"SentMail"),r.a.createElement("div",null)),r.a.createElement("div",{className:"d-flex text-muted"},r.a.createElement("div",{className:"p-3"},r.a.createElement("span",{className:"font-weight-bold"},"Total mails sent: "),this.state.drafts.length)),r.a.createElement("div",{className:"mt-5"}),r.a.createElement("div",null,t))}}]),t}(n.Component),T=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"settings")}}]),t}(n.Component),I=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"signout")}}]),t}(n.Component),W=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={progress:0,onprogress:!1},a.selectFilesHandler=function(e){e.preventDefault();var t=document.createElement("input");t.type="file",t.accept=".csv",t.click(),t.addEventListener("change",function(e){var t=e.target.files[0];a.uploadFileHandler(t)})},a.uploadFileHandler=function(e){var t=new FormData,n=new XMLHttpRequest;console.log(a.props),t.append("group_id",a.props.selected_group_id),t.append("file",e),n.addEventListener("load",function(e){var t=e.target.response;console.log(t),a.props.get_subs(),a.props.update_groups(),a.setState(Object(y.a)({},a.state,{onprogress:!1}))}),n.upload.addEventListener("progress",function(e){var t=e.loaded/e.total*100;console.log(t),a.setState(Object(y.a)({},a.state,{progress:t}))}),n.responseType="json",n.open("post",E+"api/sub_as_csv/"),n.send(t),a.setState(Object(y.a)({},a.state,{progress:!0}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.onprogress?String(this.state.progress)+" %":r.a.createElement("i",{className:"fa fa-upload"});return r.a.createElement("div",{className:""},r.a.createElement("div",{className:"new_sub_csv d-flex justify-content-between align-items-center"},r.a.createElement("div",{className:"text-left"},"Upload a .csv with fields email, name, mobile"),r.a.createElement("button",{disabled:!!this.state.onprogress,onClick:this.selectFilesHandler,className:"btn nbtn green"},e)))}}]),t}(n.Component),U=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a.componentDidMount=function(){a.new_sub=document.querySelector(".new_sub"),a.new_sub_name=a.new_sub.querySelector(".new_sub_name"),a.new_sub_email=a.new_sub.querySelector(".new_sub_email"),a.new_sub_mobile=a.new_sub.querySelector(".new_sub_mobile"),console.log(a.props)},a.add_sub_to_group_handler=function(e){e.preventDefault(),N.post("api/add_sub_to_group/",{groupId:a.props.selected_group_id,name:a.new_sub_name.value,email:a.new_sub_email.value,mobile:a.new_sub_mobile.value}).then(function(e){a.props.get_subs(),a.props.update_groups()})},a.delete_group_handler=function(e){if(e.preventDefault(),"all"!==a.props.selected_group_name){var t=a.props.selected_group_id;a.props.set_groups_state({selected_group_id:null,selected_group_name:"all"}),N.delete("api/group/".concat(t,"/")).then(function(e){console.log(e.data),a.props.update_groups()})}},a.download_group_csv_handler=function(){var e=document.createElement("a");e.href=E+"api/download_group_as_csv/".concat(a.props.selected_group_id,"/"),e.click()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=r.a.createElement("form",{autoComplete:"false",className:"d-flex new_sub align-items-center px-1 py-2",key:1},r.a.createElement("div",{className:"flex-grow-1 d-flex align-items-center justify-content-between"},r.a.createElement("input",{type:"email",className:"new_sub_email tab_input tab_input_sm",placeholder:"email",autoFocus:!0}),r.a.createElement("input",{type:"text",className:"new_sub_name tab_input tab_input_sm",placeholder:"username"}),r.a.createElement("input",{type:"mobile",className:"new_sub_mobile tab_input tab_input_sm",placeholder:"mobile no."})),r.a.createElement("div",{className:"create-sub create"},r.a.createElement("button",{onClick:this.add_sub_to_group_handler,className:"btn nbtn green"},r.a.createElement("i",{className:"fa fa-plus"}))));return r.a.createElement("div",{className:"toolbar tab p-3"},r.a.createElement("div",null,r.a.createElement("div",{className:"font-weight-bold"},"New subscriber:"),e),r.a.createElement("div",null,r.a.createElement("div",{className:"font-weight-bold mt-2"},"Upload subscribers as CSV:"),r.a.createElement(W,this.props)),r.a.createElement("div",null,r.a.createElement("div",{className:"font-weight-bold mt-2"},"Download subscribers as CSV:"),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("div",null,"Click here to download .csv of the subscribers of this group"),r.a.createElement("button",{onClick:this.download_group_csv_handler,className:"btn nbtn blue"},r.a.createElement("i",{className:"fa fa-download"})))),r.a.createElement("div",null,r.a.createElement("div",{className:"font-weight-bold mt-2"},"Delete current group:"),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("div",null,"This will only delete the group not the subscribers"),r.a.createElement("button",{disabled:"all"===this.props.selected_group_name,onClick:this.delete_group_handler,className:"btn nbtn red"},r.a.createElement("i",{className:"fa fa-trash"})))))}}]),t}(n.Component),R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.get_subs()},a.get_subs=function(){N.get("api/group/".concat(a.props.selected_group_id,"/")).then(function(e){console.log(e.data),a.setState(Object(y.a)({},a.state,e.data,{page:1,group_id:a.props.selected_group_id}))})},a.flag_sub_handler=function(e,t){e.preventDefault(),N.delete("api/subscribe/".concat(t.id,"/")).then(function(e){console.log("flagged"),1===a.state.results.length&&a.state.page>1&&a.setState(Object(y.a)({},a.state,{page:a.state.page-1})),a.get_subs(),a.props.update_groups()})},a.change_page=function(e,t){var n;e.preventDefault();var r=a.state.page;if(t)n=a.state.next,r+=1;else{if(t)return;n=a.state.previous,r-=1}N.get(n).then(function(e){console.log(e),a.setState(Object(y.a)({},a.state,e.data,{page:r}))})},a.state={next:null,previous:null,results:[],page:1,upload_subs:0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;this.state.group_id!==this.props.selected_group_id&&this.get_subs();var t=this.state.results.map(function(t,a){return r.a.createElement("div",{className:"d-flex tab align-items-center ",key:a+1},r.a.createElement("div",{className:"sub_sno px-2 font-weight-bold"},a+1),r.a.createElement("div",{className:"sub_phone px-2"},r.a.createElement("i",{className:"fa fa-circle ".concat(t.verified?"text-success":"text-danger")})),r.a.createElement("div",{className:"sub_email px-2"},t.email),r.a.createElement("div",{className:"sub_name px-2"},t.name),r.a.createElement("div",{className:"sub_phone px-2 flex-grow-1"},t.mobile),r.a.createElement("button",{onClick:function(a){return e.flag_sub_handler(a,t)},className:"btn nbtn red"},r.a.createElement("i",{className:"fa fa-times"})))}),a=r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("div",{className:"font-weight-bold p-3"},"Subscribers: ",this.state.count),r.a.createElement("div",{className:"sub-pagination pagination"},r.a.createElement("span",{className:"mx-1"},"Page ",this.state.page),r.a.createElement("button",{disabled:!this.state.previous,onClick:function(t){return e.change_page(t,0)},className:"btn nbtn blue mx-1"},r.a.createElement("i",{className:"fa fa-angle-left"})),r.a.createElement("button",{disabled:!this.state.next,onClick:function(t){return e.change_page(t,1)},className:"btn nbtn blue mx-1"},r.a.createElement("i",{className:"fa fa-angle-right"}))));return r.a.createElement("div",null,r.a.createElement("div",{className:"text-muted"},r.a.createElement(U,Object.assign({},this.props,{get_subs:this.get_subs})),a,t,this.state.results.length?a:null))}}]),t}(n.Component),V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={groups:[],new_group_name:"",selected_group_id:null,selected_group_name:"all"},a.componentDidMount=function(){a.get_groups()},a.get_groups=function(){N.get("api/group/").then(function(e){var t=(e=e.data).filter(function(e){return e.name===a.state.selected_group_name})[0];console.log(e,a.state,t),a.setState(Object(y.a)({},a.state,{groups:e,selected_group_id:t.id,selected_group_name:t.name}))}).catch(function(e){return console.error(e)})},a.delete=function(e,t){e.preventDefault(),N.delete("api/group/".concat(t)).then(function(e){e=e.data,a.setState({groups:a.state.groups.filter(function(e){return e.id!==t})})}).catch(function(e){return console.error(e)})},a.new_group=function(e){e.preventDefault(),a.state.new_group_name&&N.post("api/group/",{name:a.state.new_group_name}).then(function(e){console.log(e.data),a.setState({groups:[].concat(Object(k.a)(a.state.groups),[e.data]),new_group_name:""})}).catch(function(e){return console.error(e)})},a.show_group=function(e,t){a.setState(Object(y.a)({},a.state,{selected_group_id:t.id,selected_group_name:t.name}))},a.set_groups_state=function(e){a.setState(Object(y.a)({},a.state,e))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.groups.map(function(t,a){return r.a.createElement("div",{className:"d-flex tab align-items-center \n                ".concat(t.id===e.state.selected_group_id?"active-group":"","\n            "),key:a+2},r.a.createElement("div",{className:"group-name px-2 flex-grow-1",onClick:function(a){return e.show_group(a,t)}},t.name),r.a.createElement("div",{className:"ml-2 badge badge-pill badge-secondary "},t.subs))}),a=r.a.createElement("form",{className:"d-flex tab align-items-center new-group",key:1},r.a.createElement("div",{className:"flex-grow-1 pl-2"},r.a.createElement("input",{onChange:function(t){return e.setState(Object(y.a)({},e.state,{new_group_name:t.target.value}))},value:this.state.new_group_name,type:"text",className:"new_group_name tab_input",placeholder:"create group",autoFocus:!0})),r.a.createElement("div",{className:"create-group create px-1"},r.a.createElement("button",{onClick:this.new_group,className:"btn nbtn green"},r.a.createElement("i",{className:"fa fa-plus"}))));return r.a.createElement("div",{className:"subscribers px-5 pb-5 pt-3"},r.a.createElement("div",{className:"subs row"},r.a.createElement("div",{className:"col-md-9"},this.state.selected_group_id?r.a.createElement(R,{set_groups_state:this.set_groups_state,update_groups:this.get_groups,selected_group_name:this.state.selected_group_name,selected_group_id:this.state.selected_group_id}):""),r.a.createElement("div",{className:"col-md-3 groups-container"},r.a.createElement("div",{className:"groups-list"},r.a.createElement("div",{className:"text-muted p-3 font-weight-bold"},"Total groups: ",this.state.groups.length),a,t))))}}]),t}(n.Component),B=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"admin"},r.a.createElement(v,null),r.a.createElement(d.a,null,r.a.createElement(p.a,{path:"/admin/group/:id/",component:R}),r.a.createElement(p.a,{path:"/admin/group/",component:V}),r.a.createElement(p.a,{path:"/admin/email/:id/",component:L}),r.a.createElement(p.a,{path:"/admin/email/",component:j}),r.a.createElement(p.a,{path:"/admin/outbox/",component:A}),r.a.createElement(p.a,{path:"/admin/sent/",component:F}),r.a.createElement(p.a,{path:"/admin/settings/",component:T}),r.a.createElement(p.a,{path:"/admin/signout/",component:I})))}}]),t}(n.Component),P=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"big_menubar d-none d-md-flex align-items-center justify-content-between"},r.a.createElement(f.a,{to:"/"},r.a.createElement("div",{className:"brand d-flex align-items-center"},r.a.createElement("div",{className:"brand_logo mx-3"},r.a.createElement("img",{src:a(221),alt:""})),r.a.createElement("div",{className:"brand_name"},"Brandname"))),r.a.createElement(d.a,null,r.a.createElement(p.a,{path:"/:page/",component:function(){return r.a.createElement("div",{className:"links d-flex"},r.a.createElement("div",{className:"link mr-3"},r.a.createElement(f.a,{to:"/about/",className:"active"},"About Us")),r.a.createElement("div",{className:"link mr-3"},r.a.createElement(f.a,{to:"/services/"},"Services")),r.a.createElement("div",{className:"link mr-3"},r.a.createElement(f.a,{to:"/clients/"},"Our Clients")),r.a.createElement("div",{className:"link mr-3"},r.a.createElement(f.a,{to:"/newsfeed/"},"Newfeed")),r.a.createElement("div",{className:"link mr-3"},r.a.createElement(f.a,{to:"/subscribe/"},"Subscribe")),r.a.createElement("div",{className:"link mr-3"},r.a.createElement(f.a,{to:"/contactus/"},"Contact Us")))}}),r.a.createElement(p.a,{path:"/",component:function(){return r.a.createElement("div",{className:"links d-flex"},r.a.createElement("div",{className:"link mr-3"},r.a.createElement(f.a,{to:"/getStarted/",className:"active get-started"},"Get Started")),r.a.createElement("div",{className:"link mr-3"},r.a.createElement(f.a,{to:"/newsfeed/",className:""},"Newfeed")))}}))))}}]),t}(n.Component),J=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",null,r.a.createElement("div",{className:"px-5 pb-5 ml-5 catch-phrase display-3"},"A catch phrase for the company goes here"),r.a.createElement("div",{className:"px-5 pb-5 ml-5 text-secondary brief "},"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Numquam nostrum libero animi sunt minus, voluptas delectus beatae atque impedit consectetur"),r.a.createElement("div",{className:"home-link text-center mb-5"},r.a.createElement(f.a,{to:"/home/"},"Continue")));return r.a.createElement("div",{className:"get-started row mx-0 align-items-center"},r.a.createElement("div",{className:"col-md-6"},e),r.a.createElement("div",{className:"col-md-6 cover-img"},e))}}]),t}(n.Component),Z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).changeTabHandler=function(e){e.preventDefault(),console.log(e.target.innerHTML)},a.componentDidMount=function(){var e=document.querySelectorAll(".main .tabs div"),t=document.querySelectorAll(".main .content div");e.forEach(function(a,n){a.addEventListener("click",function(a){t.forEach(function(e){return e.style.display="none"}),e.forEach(function(e){return e.classList.remove("active")}),t[n].style.display="block",e[n].classList.add("active")})})},a.text=r.a.createElement("div",null,r.a.createElement("div",{className:"tabs d-flex mt-5 mx-5"},r.a.createElement("div",{className:"active"},"Mission"),r.a.createElement("div",null,"Who we are"),r.a.createElement("div",null,"Our History")),r.a.createElement("div",{className:"m-5 content"},r.a.createElement("div",null,"Mission Lorem ipsum dolor sit amet consectetur adipisicing elit. Ratione ex id quam optio iste ipsum necessitatibus reprehenderit officiis esse quia aliquid exercitationem iusto laboriosam, accusantium delectus culpa mollitia. Alias, saepe quos voluptatem magnam necessitatibus nobis odio labore enim ad cumque iusto, cum at sint. Animi quae maiores corrupti ipsum quam."),r.a.createElement("div",null,"who we are"),r.a.createElement("div",null,"history"))),a.state={currTab:"Mission"},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"about row mx-0"},r.a.createElement("div",{className:"main col-md-6"},this.text),r.a.createElement("div",{className:"col-md-6 about-img"},this.text))}}]),t}(n.Component),X=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"clients")}}]),t}(n.Component),G=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"contact")}}]),t}(n.Component),K=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"footer")}}]),t}(n.Component),Q=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"news")}}]),t}(n.Component),$=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"services")}}]),t}(n.Component),z=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={saved:!1,verified:!1},a.componentDidMount=function(){a.subscribe=document.querySelector("#subscribe")},a.SubscribeHandler=function(e){e.preventDefault();var t=a.subscribe.querySelector("#subName"),n=a.subscribe.querySelector("#subMobile"),r=a.subscribe.querySelector("#subEmail"),s={name:t.value,mobile:n.value,email:r.value};N.post("api/subscriber/",s).then(function(e){var t=e.data;console.log(t),t.id&&(a.setState(Object(y.a)({},a.state,t,{saved:!0})),t.verified||a.sendOtpHandler())})},a.sendOtpHandler=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.preventDefault(),N.post("api/sendOtp/",{id:a.state.id}).then(function(e){console.log(e.data)}).catch(function(e){console.error(e)})},a.VerifyOtpHandler=function(e){e.preventDefault();var t=a.subscribe.querySelector("#otp");N.post("api/verifyOtp/",{otp:t.value,id:a.state.id}).then(function(e){console.log(e.data),a.setState(Object(y.a)({},a.state,e.data))}).catch(function(e){console.error(e)})},a.wrongMailHandler=function(e){e.preventDefault(),N.delete("api/subscriber/".concat(a.state.id,"/")).then(function(e){console.log(e.data),a.setState(Object(y.a)({},a.state,{saved:!1}))}).catch(function(e){console.error(e)})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",null,r.a.createElement("input",{type:"text",id:"subName",placeholder:"name"}),r.a.createElement("input",{type:"text",id:"subMobile",placeholder:"mobile"}),r.a.createElement("input",{type:"email",id:"subEmail",placeholder:"email"}),r.a.createElement("input",{type:"submit",onClick:this.SubscribeHandler})),t=r.a.createElement("div",null,this.state.email,this.state.verified?"verification success":"not yet verified ",r.a.createElement("input",{type:"text",placeholder:"otp",id:"otp"}),r.a.createElement("input",{type:"submit",onClick:this.VerifyOtpHandler}),r.a.createElement("button",{className:"btn btn-sm btn-outline-primary",onClick:this.sendOtpHandler},"resend otp"),r.a.createElement("button",{className:"btn btn-sm btn-outline-danger",onClick:this.wrongMailHandler},"wrong email?"));return r.a.createElement("form",{id:"subscribe",className:"my-5"},this.state.saved?t:e)}}]),t}(n.Component),Y=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"index"},r.a.createElement(Z,null),r.a.createElement(Q,null),r.a.createElement($,null),r.a.createElement(X,null),r.a.createElement(z,null),r.a.createElement(G,null),r.a.createElement(K,null))}}]),t}(n.Component),ee=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"index"},r.a.createElement(P,null),r.a.createElement(d.a,null,r.a.createElement(p.a,{path:"/home/",component:Y}),r.a.createElement(p.a,{path:"/",component:J})))}}]),t}(n.Component),te=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"app"},r.a.createElement(d.a,null,r.a.createElement(p.a,{path:"/admin",component:B}),r.a.createElement(p.a,{path:"/",component:ee})),r.a.createElement("link",{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.6.3/css/all.css",integrity:"sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/",crossOrigin:"anonymous"}))}}]),t}(n.Component),ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var re=a(225);l.a.render(r.a.createElement(re.a,null,r.a.createElement(te,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");ae?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ne(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ne(t,e)})}}()},96:function(e,t,a){e.exports=a(222)}},[[96,2,1]]]);
//# sourceMappingURL=main.cc449b2c.chunk.js.map