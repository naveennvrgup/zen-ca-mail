{"version":3,"sources":["axios.js","admin/email/file_upload.js","admin/email/new_mail.js"],"names":["__webpack_require__","d","__webpack_exports__","burl","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","n","axios","create","baseURL","headers","authorization","sessionStorage","FileUpload","faxios","state","files","componentDidMount","fi","_this","props","initialFiles","console","log","map","ele","id","url","file","progess","name","split","pop","saved","setState","Object","objectSpread","selectFilesHandler","e","preventDefault","document","createElement","type","multiple","click","addEventListener","currFiles","toConsumableArray","_loop","i","flag","forEach","push","progress","length","uploadFileHandler","data","FormData","request","XMLHttpRequest","append","draftId","res","target","response","item","upload","loaded","total","filter","responseType","open","setRequestHeader","send","deleteFileHandler","delete","concat","then","abort","_this2","this","react_default","a","className","action","onClick","file_link","href","rel","key","style","width","Component","NewMail","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","subject","querySelector","match","params","localStorage","setItem","get","html2Draft","body","value","onEditorStateChange","editorState","draft2Html","draftToHtml","convertToRaw","getCurrentContent","html","contentBlock","htmlToDraft","contentState","ContentState","createFromBlockArray","contentBlocks","EditorState","createWithContent","saveDraftHandler","sendMail","put","history","sendMailHandler","_ref","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","stop","_x","apply","arguments","deleteDraftHandler","status","htmlFor","dist_react_draft_wysiwyg","file_upload_FileUpload"],"mappings":"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","file":"static/js/8.fcfeefd5.chunk.js","sourcesContent":["import axios from 'axios'\n\n// export let burl = 'http://192.168.43.218:8000/'\nexport let burl = 'http://192.168.1.3:8000/'\n\nif (process.env.NODE_ENV === 'production') {\n  burl = '/'\n}\n\nexport default () => {\n  return axios.create({\n    baseURL: burl,\n    headers: {\n      authorization: sessionStorage['token'],\n    }\n  });\n}","import React, { Component } from 'react'\nimport faxios, { burl } from '../../axios'; \n\nexport default class FileUpload extends Component {\n    axios = faxios()\n    state = {\n        files: []\n    }\n\n    componentDidMount = () => {\n        \n        let fi = this.props.initialFiles\n        console.log(fi)\n\n        fi = fi.map(ele => ({\n            id: ele.id,\n            url: ele.file,\n            progess: '100%',\n            name: ele.file.split('/').pop(),\n            saved: true\n        }))\n\n        this.setState({\n            ...this.state,\n            files: fi\n        })\n\n    }\n\n    selectFilesHandler = e => {\n        e.preventDefault()\n\n        let fi = document.createElement('input')\n        fi.type = 'file'\n        fi.multiple = true\n        fi.click()\n\n        fi.addEventListener('change', e => {\n            let currFiles = [...this.state.files]\n\n            for (let i = 0; i < fi.files.length; i++) {\n                let file = fi.files[i]\n                let flag = true\n\n                currFiles.forEach(ele => {\n                    if (ele.name === file.name) {\n                        flag = false\n                    }\n                })\n\n                if (flag) {\n                    currFiles.push({\n                        file: file,\n                        name: file.name,\n                        progress: 0,\n                    })\n                }\n            }\n\n            this.setState({\n                ...this.state,\n                files: currFiles\n            })\n        })\n    }\n\n    uploadFileHandler = (e, ele) => {\n        e.preventDefault()\n\n        var data = new FormData();\n        var request = new XMLHttpRequest();\n\n        data.append('file', ele.file);\n        data.append('draft', this.props.draftId)\n\n        // load event\n        request.addEventListener('load', (e) => {\n            let res = e.target.response\n            console.log(res);\n\n            this.setState({\n                files: this.state.files.map(item => {\n                    if (item.name === ele.name) {\n                        return {\n                            ...item,\n                            saved: true,\n                            progress: '100%',\n                            url: res.file,\n                            id: res.id,\n                        }\n                    }\n                    return item\n                })\n            })\n        });\n\n        console.log(this.state.files)\n\n        // monitor progress of upload\n        request.upload.addEventListener('progress', (e) => {\n            var progress = (e.loaded / e.total) * 100 + '%';\n\n            this.setState({\n                files: this.state.files.map(item => {\n                    if (item.name === ele.name) {\n                        return {\n                            ...item,\n                            progress\n                        }\n                    }\n                    return item\n                })\n            })\n        });\n\n        request.upload.addEventListener('abort', (e) => {\n            let files = this.state.files\n                .filter(item => item.name !== ele.file.name)\n\n            this.setState({\n                ...this.state,\n                files\n            })// end of setstate\n\n        })\n\n        request.responseType = 'json';\n        request.open('post', burl + 'api/attachment/');\n        request.setRequestHeader('Authorization',sessionStorage['token'])\n        request.send(data);\n\n        // attach request obj to state  \n        this.setState({\n            files: this.state.files.map(item => {\n                if (item.name === ele.name) {\n                    return {\n                        ...item,\n                        request\n                    }\n                }\n                return item\n            })\n        })\n    }\n\n    deleteFileHandler = (e, ele) => {\n        e.preventDefault()\n\n        if (!ele.saved) {\n            ele.request.abort()\n            return\n        }\n\n        this.axios.delete(`api/attachment/${ele.id}/`)\n            .then(d => {\n                d = d.data\n                let files = this.state.files.filter(item => item.id !== ele.id)\n                this.setState({ files })\n            })\n    }\n\n    render() {\n        let files = (\n            <div className=\"alert alert-warning\">\n                No attachments yet\n            </div>\n        )\n\n        if (this.state.files.length > 0) {\n            // console.log('rendering')\n            files = []\n            this.state.files.forEach((ele, i) => {\n                // console.log(ele)\n                let action =\n                    <button className=\"btn green nbtn mx-2\" onClick={(e) => this.uploadFileHandler(e, ele)}>\n                        <i className=\"fa fa-upload\"></i>\n                    </button>\n                let file_link = 'inprogess'\n\n                if (!ele.progess) {\n                    file_link = 'waiting'\n                }\n\n                if (ele.saved) {\n                    file_link =\n                        <a href={ele.url} target='_blank' rel=\"noopener noreferrer\" >\n                            link\n                        </a>\n                }\n\n                if (ele.progress || ele.id) {\n                    action =\n                        <button className=\"btn red nbtn mx-2\" onClick={(e) => this.deleteFileHandler(e, ele)}>\n                            <i className=\"fa fa-times\"></i>\n                        </button>\n                }\n\n                files.push(\n                    <div className='d-flex tab file align-items-center justify-content-between' key={ele.name}>\n                        <div className='d-flex align-items-center justify-content-between'>\n                            <div className='name mx-2'>\n                                {ele.name}\n                            </div>\n                            <div className='link mx-2 badge badge-pill badge-dark'>\n                                {file_link}\n                            </div>\n                        </div>\n                        <div className='d-flex align-items-center justify-content-between'>\n                            <div className={`progress mx-2 ${ele.saved ? 'hide-progress' : ''}`}>\n                                <div className={`progress-bar progress-bar-striped m-0`}\n                                    style={{ width: ele.progress }}></div>\n                            </div>\n                            {action}\n                        </div>\n                    </div>\n                )\n            })\n        }\n\n        return (\n            <div className='fileUpload'>\n                <div className=\"d-flex align-items-center mt-3\">\n                    <div>\n                        <label className='font-weight-bold mx-3 my-4'>Attachments:</label>\n                    </div>\n                    <div>\n                        <button className=\"btn blue nbtn\" onClick={this.selectFilesHandler}>\n                            <i className=\"fa fa-plus\" ></i>\n                        </button>\n                    </div>\n                </div>\n                <div className=\"files\">\n                    {files}\n                </div>\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\n\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport FileUpload from './file_upload'\n\nimport { EditorState, convertToRaw, ContentState } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs';\n\nimport faxios from '../../axios';\n\nexport default class NewMail extends Component {\n    axios = faxios()\n    constructor(props) {\n        super(props);\n\n        let emailBody = '<p>loading please wait...</p>';\n\n        const contentBlock = htmlToDraft(emailBody);\n        if (contentBlock) {\n            const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\n            const editorState = EditorState.createWithContent(contentState);\n            this.state = {\n                editorState,\n                files: false\n            };\n        }\n    }\n\n    componentDidMount = () => {\n        this.subject = document.querySelector('#subject');\n        this.files = document.querySelector('.files');\n        this.draftId = this.props.match.params.id\n        localStorage.setItem('currDraft', this.draftId)\n\n        this.axios.get('api/draft/' + this.draftId + '/')\n            .then(d => {\n                d = d.data\n\n                this.html2Draft(d.body)\n                this.subject.value = d.subject\n                console.log(d)\n                this.setState({\n                    ...this.state,\n                    ...d\n                })\n            })\n    }\n\n    onEditorStateChange = (editorState) => {\n        this.setState({ editorState });\n    };\n\n    draft2Html = () => {\n        const { editorState } = this.state;\n        const html = draftToHtml(convertToRaw(editorState.getCurrentContent()))\n        return html\n    }\n\n    html2Draft = (html) => {\n        const contentBlock = htmlToDraft(html);\n        if (contentBlock) {\n            const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\n            const editorState = EditorState.createWithContent(contentState);\n            this.setState({ editorState });\n        }\n    }\n\n    saveDraftHandler = (e, sendMail) => {\n        e.preventDefault()\n\n        this.axios.put('api/draft/' + this.draftId + '/', {\n            subject: this.subject.value,\n            body: this.draft2Html()\n        })\n            .then(d => {\n                // console.log(d.data)\n                if (!sendMail) {\n                    this.props.history.push('/admin/email/')\n                }\n            })\n    }\n\n    sendMailHandler = async (e) => {\n        e.preventDefault()\n        await this.saveDraftHandler(e, true)\n        this.props.history.push(`/admin/email/send_email/${this.draftId}/`)\n    }\n\n    deleteDraftHandler = (e) => {\n        e.preventDefault()\n        this.axios.delete('api/draft/' + this.draftId + '/')\n            .then(d => {\n                console.log(d.data)\n                this.props.history.push('/admin/email/')\n            })\n    }\n\n    render() {\n        return (\n            <div className='newMail'>\n                <form className=''>\n                    <div className=\"d-md-flex d-block align-items-center justify-content-between\">\n                        <h1 className='text-center'>Edit Mail</h1>\n                        <div className={`buttons py-md-3 py-1 ${this.state.status ? 'd-none' : 'd-flex justify-content-center'}`}>\n                            <button className=\"btn btn-outline-danger mr-3\"\n                                onClick={this.deleteDraftHandler}>delete</button>\n                            <button className=\"btn mr-3\"\n                                onClick={this.saveDraftHandler}>save</button>\n                            <button className=\"btn btn-success\"\n                                onClick={this.sendMailHandler}>send</button>\n                        </div>\n                    </div>\n\n                    {/* subject */}\n                    <div className=\"form-group mt-3\">\n                        <label htmlFor=\"subject\" className='font-weight-bold'>Subject:</label>\n                        <input\n                            status={this.state.status}\n                            type='text'\n                            id='subject'\n                            className='form-control w-100' />\n                    </div>\n\n                    {/* body */}\n                    <label className='font-weight-bold mt-2'>Body:</label>\n                    <div className='body'>\n                        <Editor\n                            className='bg-white'\n                            status={this.state.status}\n                            editorState={this.state.editorState}\n                            onEditorStateChange={this.onEditorStateChange}\n                        />\n                    </div>\n\n                    {this.state.files ?\n                        <FileUpload draftId={this.draftId} initialFiles={this.state.files} />\n                        : ''}\n\n                </form>\n            </div>\n        )\n    }\n}\n"],"sourceRoot":""}