(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{348:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return d});var n=a(37),r=a(5),o=a(9),c=a(7),l=a(6),s=a(8),i=a(0),u=a.n(i),m=a(35),d=function(e){function t(){var e,a;Object(r.a)(this,t);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).axios=Object(m.b)(),a.state={groups:[],draft:{subject:"",body:"",files:[]}},a.componentDidMount=function(){a.draftId=a.props.match.params.id,a.send_mail=document.querySelector(".send-mail"),a.body=a.send_mail.querySelector(".body"),a.group=a.send_mail.querySelector("#group"),a.axios.get("api/group/").then(function(e){e=e.data,console.log(e),a.setState(Object(n.a)({},a.state,{groups:e}))}),a.axios.get("api/draft/".concat(a.draftId,"/")).then(function(e){e=e.data,console.log(e),a.body.innerHTML=e.body,a.setState(Object(n.a)({},a.state,{draft:e}))})},a.send_mail_handler=function(e){e.preventDefault(),"0"!==a.group.value&&a.axios.post("api/send_bulk_mail/",{group:a.group.value,draft:a.draftId}).then(function(e){console.log(e.data),a.props.history.push("/admin/email/")})},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=[u.a.createElement("option",{className:"form-control",key:0,value:0},"--choose--")];this.state.groups.forEach(function(t){return e.push(u.a.createElement("option",{className:"form-control",key:t.id,value:t.id},t.name," (",t.subs,")"))});var t=this.state.draft.files.map(function(e){return u.a.createElement("li",{key:e.id},u.a.createElement("a",{href:e.file},e.file.split("/").pop()))});return u.a.createElement("div",{className:"send-mail"},u.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},u.a.createElement("h1",{className:""},"Send Mail"),u.a.createElement("div",null,u.a.createElement("button",{onClick:this.props.history.goBack,className:"btn mx-2"},u.a.createElement("i",{className:"fa fa-arrow-left"})," back"),u.a.createElement("button",{disabled:!this.state.draft.id,onClick:this.send_mail_handler,className:"btn btn-success mx-2 "},"Send ",u.a.createElement("i",{className:"fa fa-plane"})))),u.a.createElement("div",{className:"info mt-4"},u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{className:"font-weight-bold"},"Subscriber group:"),u.a.createElement("select",{name:"group",className:"form-control d-inline-block w-auto mx-3",defaultValue:0,id:"group"},e)),u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{className:"font-weight-bold"},"Subject:"),u.a.createElement("span",{className:"subject mx-3"},this.state.draft.subject)),u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{className:"font-weight-bold"},"Body:"),u.a.createElement("div",{className:"body"})),u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{className:"font-weight-bold"},"Attachments:"),u.a.createElement("ol",{className:"attachments"},t))))}}]),t}(i.Component)},35:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(45),r=a.n(n),o="http://192.168.1.3:8000/";o="/",t.b=function(){return r.a.create({baseURL:o,headers:{authorization:sessionStorage.token}})}},37:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),r.forEach(function(t){n(e,t,a[t])})}return e}a.d(t,"a",function(){return r})}}]);
//# sourceMappingURL=10.62390223.chunk.js.map