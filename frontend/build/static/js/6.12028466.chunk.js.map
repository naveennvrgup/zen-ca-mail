{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","admin/email/send_mail.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","_arrayWithoutHoles","iter","Symbol","iterator","Object","prototype","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","__webpack_require__","d","__webpack_exports__","send_mail","axios","faxios","state","groups","selected_groups","draft","subject","body","files","componentDidMount","_this","draftId","props","match","params","id","document","querySelector","group","get","then","data","console","log","setState","concat","innerHTML","send_mail_handler","e","preventDefault","post","map","history","push","_on_group_select","value","Number","target","filter","ele","selected_group","_home_naveensundar_Desktop_zen_ca_mail_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","_on_selectall_group","_on_group_deselect","group_id","deselected_group","_this2","this","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","key","forEach","name","subs","onClick","total_selected_groups","total_selected_emails","reduce","sum","attachments","href","file","split","pop","goBack","disabled","defaultValue","onChange","Component"],"mappings":"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","file":"static/js/6.12028466.chunk.js","sourcesContent":["import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import React, { Component } from 'react'\nimport faxios from '../../axios'\n\nexport default class send_mail extends Component {\n    axios = faxios()\n    state = {\n        groups: [],\n        selected_groups: [],\n        draft: {\n            subject: '',\n            body: '',\n            files: []\n        }\n    }\n\n    componentDidMount = () => {\n        this.draftId = this.props.match.params.id\n        this.send_mail = document.querySelector('.send-mail');\n        this.body = this.send_mail.querySelector('.body');\n        this.group = this.send_mail.querySelector('#group');\n\n\n        this.axios.get('api/group/')\n            .then(d => {\n                d = d.data\n                console.log(d)\n                this.setState({\n                    groups: d\n                })\n            })\n\n        this.axios.get(`api/draft/${this.draftId}/`)\n            .then(d => {\n                d = d.data\n                console.log(d)\n                this.body.innerHTML = d.body\n                this.setState({\n                    draft: d\n                })\n            })\n    }\n\n    send_mail_handler = e => {\n        e.preventDefault()\n\n        if(this.state.selected_groups.length===0){\n            return\n        }\n        \n        this.axios.post('api/send_bulk_mail/', {\n            groups: this.state.selected_groups.map(group=>group.id),\n            draft: this.draftId\n        }).then(d => {\n            console.log(d.data)\n            this.props.history.push('/admin/email/')\n        })\n    }\n\n    _on_group_select = e => {\n        e.preventDefault()\n        const value= Number(e.target.value)\n\n        if(value==='0'){\n            return\n        }\n        \n        var groups = this.state.groups.filter(ele => ele.id !== Number(value))\n        var selected_group = this.state.groups.filter(ele => ele.id === Number(value))[0]\n\n        this.setState({\n            groups,\n            selected_groups: [...this.state.selected_groups, selected_group]\n        })\n    }\n\n    _on_selectall_group = e => {\n        e.preventDefault()\n        this.setState({\n            groups: [],\n            selected_groups: this.state.groups\n        })\n    }\n\n    _on_group_deselect = (e,group_id) => {\n        e.preventDefault()\n        \n        var deselected_group = this.state.selected_groups.filter(ele => ele.id === group_id)[0]\n        var selected_groups = this.state.selected_groups.filter(ele => ele.id !== group_id)\n\n        this.setState({\n            groups: [...this.state.groups,deselected_group],\n            selected_groups\n        })\n    }\n\n    render() {\n        const groups = [<option\n            className='form-control'\n            key={0}\n            value={0}>--choose--</option>]\n\n        this.state.groups.forEach(ele =>\n            groups.push(<option\n                className='form-control'\n                key={ele.id}\n                value={ele.id}>{ele.name} ({ele.subs})</option>)\n        )\n\n        const selected_groups = this.state.selected_groups.map(ele=> (\n            <div className=\"mx-1 my-1 selected-group\" key={ele.id}>\n                <span className='group-name'>{ele.name} ({ele.subs})</span>\n                <button className=\"d-inline-block\" onClick={(e)=>this._on_group_deselect(e,ele.id)}>\n                    <i className=\"fa fa-times\"></i>\n                </button>\n            </div>\n        ))\n\n        const total_selected_groups = this.state.selected_groups.length\n        const total_selected_emails = this.state.selected_groups.reduce((sum,ele)=>sum+=ele.subs,0)\n\n        const attachments = this.state.draft.files.map(ele => <li key={ele.id}>\n            <a href={ele.file}>{ele.file.split('/').pop()}</a>\n        </li>)\n\n        return (\n            <div className='send-mail'>\n                <div className=\"d-md-flex justify-content-between align-items-center\">\n                    <h1 className=\"text-center\">Send Mail</h1>\n                    <div className='text-center'>\n                        <button\n                            onClick={this.props.history.goBack}\n                            className=\"btn mx-2\">\n                            <i className=\"fa fa-arrow-left\"></i > back\n                        </button>\n                        <button\n                            disabled={this.state.draft.id ? false : true}\n                            onClick={this.send_mail_handler}\n                            className=\"btn btn-success mx-2 \">\n                            Send <i className=\"fa fa-plane\"></i >\n                        </button>\n                    </div>\n                </div>\n                <div className=\"info mt-4\">\n                    <div className=\"form-group\">\n                        <label className='font-weight-bold'>Select groups:</label>\n                        <select\n                            name=\"group\"\n                            className='form-control d-inline-block w-auto mx-3'\n                            defaultValue={0}\n                            onChange={this._on_group_select}\n                            id=\"group\">\n                            {groups}\n                        </select>\n                        <button onClick={this._on_selectall_group} className=\"btn\">Select all</button>\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Selected groups: </label>\n                        {selected_groups}\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label>Total Selected groups: </label> {total_selected_groups}\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label>Total Selected emails: </label> {total_selected_emails}\n                    </div>\n                    <div className=\"form-group\">\n                        <label className='font-weight-bold'>Subject:</label>\n                        <span className=\"subject mx-3\">{this.state.draft.subject}</span>\n                    </div>\n                    <div className=\"form-group\">\n                        <label className='font-weight-bold'>Body:</label>\n                        <div className=\"body\"></div>\n                    </div>\n                    <div className=\"form-group\">\n                        <label className='font-weight-bold'>Attachments:</label>\n                        <ol className=\"attachments\">{attachments}</ol>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n"],"sourceRoot":""}