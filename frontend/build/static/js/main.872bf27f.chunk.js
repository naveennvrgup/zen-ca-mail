(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){},103:function(e,t,a){},105:function(e,t,a){},221:function(e,t,a){e.exports=a.p+"static/media/logo.f259361c.png"},222:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(28),l=a.n(r),c=(a(101),a(1)),i=a(2),o=a(4),u=a(3),m=a(5),d=a(227),p=a(224),f=(a(103),a(105),a(223)),b=a(226),h=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).componentDidMount=function(){var e=document.querySelectorAll(".sidebar a");document.querySelector(".sidebar").style.height="100vh",e.forEach(function(e){e.href.split("/").pop()===a.props.location.pathname.split("/").pop()?e.parentElement.classList.add("active"):e.parentElement.classList.remove("active")}),e.forEach(function(t){t.addEventListener("click",function(a){e.forEach(function(e){return e.parentElement.classList.remove("active")}),t.parentElement.classList.add("active")})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"sidebar pt-5"},s.a.createElement("div",{className:"link w-100"},s.a.createElement(f.a,{to:"/admin/"},s.a.createElement("i",{className:"far fa-chart-bar"}),s.a.createElement("span",null,"Dashboard"))),s.a.createElement("div",{className:"link w-100"},s.a.createElement("i",{className:"fa fa-users"}),s.a.createElement(f.a,{to:"/admin/group"},"Subscribers")),s.a.createElement("div",{className:"link w-100"},s.a.createElement("i",{className:"far fa-newspaper"}),s.a.createElement(f.a,{to:"/admin/news"},"Newsfeed")),s.a.createElement("div",{className:"link w-100"},s.a.createElement("i",{className:"far fa-envelope"}),s.a.createElement(f.a,{to:"/admin/email"},"E-mail")),s.a.createElement("div",{className:"link w-100"},s.a.createElement("i",{className:"fas fa-inbox"}),s.a.createElement(f.a,{to:"/admin/outbox"},"Outbox")),s.a.createElement("div",{className:"link w-100"},s.a.createElement("i",{className:"fas fa-rocket"}),s.a.createElement(f.a,{to:"/admin/sent"},"Sent Mail")),s.a.createElement("div",{className:"link w-100"},s.a.createElement("i",{className:"fa fa-cog"}),s.a.createElement(f.a,{to:"/admin/settings"},"Settings")),s.a.createElement("div",{className:"link w-100"},s.a.createElement("i",{className:"fas fa-sign-out-alt"}),s.a.createElement(f.a,{to:"/admin/signout"},"Signout")))}}]),t}(n.Component),v=Object(b.a)(h),g=a(9),E=a(92),N="http://localhost:8000/";N="/";var j=a.n(E).a.create({baseURL:N,headers:{}}),_=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={},a.componentDidMount=function(){var e=a.props.count,t=0,n=0,s=0;a.props.results.forEach(function(e){switch(e.status){case 0:t++;break;case 1:n++;break;case 2:s++}}),a.setState(Object(g.a)({},a.state,{total:e,drafts:t,outbox:n,sent:s}))},a.newMailHandler=function(e){e.preventDefault(),j.post("api/draft/",{subject:"new draft"}).then(function(e){console.log(e.data),a.props.history.push("/admin/email/".concat(e.data.id,"/"))})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"tab p-4"},s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-circle text-primary"}),s.a.createElement("span",{className:"font-weight-bold mx-2"},"Total Emails:"),s.a.createElement("span",null,this.state.total)),s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-circle text-danger"}),s.a.createElement("span",{className:"font-weight-bold text-muted mx-2"},"Drafts:"),s.a.createElement("span",null,this.state.drafts)),s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-circle text-warning"}),s.a.createElement("span",{className:"font-weight-bold text-muted mx-2"},"Outbox:"),s.a.createElement("span",null,this.state.outbox)),s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-circle text-success"}),s.a.createElement("span",{className:"font-weight-bold text-muted mx-2"},"Sent:"),s.a.createElement("span",null,this.state.sent)))}}]),t}(n.Component),w=Object(b.a)(_),O=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={results:[],page:1},a.status_color=["text-danger","text-warning","text-success"],a.componentDidMount=function(){j.get("api/draft/").then(function(e){e=e.data,console.log(e),e.results=e.results.filter(function(e){return 0==e.status}),a.setState(Object(g.a)({},a.state,e))})},a.deleteDraftHandler=function(e,t){e.preventDefault(),t||(t=e.target.parentElement.parentElement.dataset.sid),j.delete("api/draft/"+t+"/").then(function(e){var n=a.state.drafts.filter(function(e){return e.id!==Number(t)});a.setState({drafts:n})}).catch(function(e){return console.error(e)}),console.log(t)},a.send2EditHandler=function(e,t){e.preventDefault(),a.props.history.push("/admin/email/".concat(t,"/"))},a.change_page=function(e,t){var n;e.preventDefault();var s=a.state.page;if(t)n=a.state.next,s+=1;else{if(t)return;n=a.state.previous,s-=1}j.get(n).then(function(e){console.log(e),a.setState(Object(g.a)({},a.state,e.data,{page:s}))})},a.createDraftView=function(e,t){return s.a.createElement("div",{className:"d-flex tab align-items-center justify-content-between email",key:e.id},s.a.createElement("div",{className:"d-flex align-items-center mx-2 flex-grow-1"},s.a.createElement("div",{className:a.status_color[e.status]},s.a.createElement("i",{className:"fa fa-circle"})),s.a.createElement("div",{className:"srno mx-2 font-weight-bold"},t+1),s.a.createElement("div",{className:"subject mx-2 flex-grow-1"},e.subject),s.a.createElement("div",{className:"date mx-2 text-muted"},"(",e.edited_on,")")),s.a.createElement("div",{className:"d-flex align-items-center"},s.a.createElement("button",{onClick:function(t){return a.send2EditHandler(t,e.id)},className:"btn nbtn mx-1 green"},s.a.createElement("i",{className:"fas fa-pen-alt"})),s.a.createElement("button",{onClick:function(t){return a.deleteDraftHandler(t,e.id)},className:"btn nbtn mx-1 red"},s.a.createElement("i",{className:"fas fa-times"}))))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.results;t=t.map(function(t,a){return e.createDraftView(t,a)});var a=s.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},s.a.createElement("div",{className:"font-weight-bold p-3"},"Drafts: ",this.state.count),s.a.createElement("div",{className:"sub-pagination pagination"},s.a.createElement("span",{className:"mx-1"},"Page ",this.state.page),s.a.createElement("button",{disabled:!this.state.previous,onClick:function(t){return e.change_page(t,0)},className:"btn nbtn blue mx-1"},s.a.createElement("i",{className:"fa fa-angle-left"})),s.a.createElement("button",{disabled:!this.state.next,onClick:function(t){return e.change_page(t,1)},className:"btn nbtn blue mx-1"},s.a.createElement("i",{className:"fa fa-angle-right"}))));return s.a.createElement("div",{className:"emails px-5 pb-5"},s.a.createElement("div",{className:"mt-3 row"},s.a.createElement("div",{className:"col-md-9"},s.a.createElement(w,this.state),a,t,this.state.results.length>10?a:""),s.a.createElement("div",{className:"col-md-3"},s.a.createElement("button",{className:"btn btn-success",onClick:this.newMailHandler},"New Mail"))))}}]),t}(n.Component),y=a(56),x=a.n(y),k=a(93),S=(a(130),a(41)),C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={files:[]},a.componentDidMount=function(){var e=a.props.initialFiles;console.log(e),e=e.map(function(e){return{id:e.id,url:e.file,progess:"100%",name:e.file.split("/").pop(),saved:!0}}),a.setState(Object(g.a)({},a.state,{files:e}))},a.selectFilesHandler=function(e){e.preventDefault();var t=document.createElement("input");t.type="file",t.multiple=!0,t.click(),t.addEventListener("change",function(e){for(var n=Object(S.a)(a.state.files),s=function(e){var a=t.files[e],s=!0;n.forEach(function(e){e.name===a.name&&(s=!1)}),s&&n.push({file:a,name:a.name,progress:0})},r=0;r<t.files.length;r++)s(r);a.setState(Object(g.a)({},a.state,{files:n}))})},a.uploadFileHandler=function(e,t){e.preventDefault();var n=new FormData,s=new XMLHttpRequest;n.append("file",t.file),n.append("draft",a.props.draftId),s.addEventListener("load",function(e){var n=e.target.response;console.log(n),a.setState({files:a.state.files.map(function(e){return e.name===t.name?Object(g.a)({},e,{saved:!0,progress:"100%",url:n.file,id:n.id}):e})})}),s.upload.addEventListener("progress",function(e){var n=e.loaded/e.total*100+"%";a.setState({files:a.state.files.map(function(e){return e.name===t.name?Object(g.a)({},e,{progress:n}):e})})}),s.responseType="json",s.open("post","http://localhost:8000/api/attachment/"),s.send(n),a.setState({files:a.state.files.map(function(e){return e.name===t.name?Object(g.a)({},e,{request:s}):e})})},a.deleteFileHandler=function(e,t){e.preventDefault(),j.delete("api/attachment/".concat(t.id,"/")).then(function(e){e=e.data;var n=a.state.files.filter(function(e){return e.id!==t.id});a.setState({files:n})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=s.a.createElement("div",{className:"alert alert-warning"},"No attachments yet");return this.state.files.length>0&&(t=[],this.state.files.forEach(function(a,n){console.log(a);var r=s.a.createElement("button",{className:"btn green",onClick:function(t){return e.uploadFileHandler(t,a)}},s.a.createElement("i",{className:"fa fa-upload"})),l="inprogess";a.progess||(l="waiting"),a.saved&&(l=s.a.createElement("a",{href:a.url,target:"_blank",rel:"noopener noreferrer"},"FId: ",a.id)),(a.progress||a.id)&&(r=s.a.createElement("button",{className:"btn red",onClick:function(t){return e.deleteFileHandler(t,a)}},s.a.createElement("i",{className:"fa fa-times"}))),t.push(s.a.createElement("div",{className:"d-flex file p-2",key:a.name},s.a.createElement("div",{className:"name"},a.name),s.a.createElement("div",{className:"fid"},l),s.a.createElement("div",null,s.a.createElement("div",{className:"progress  ".concat(a.saved?"hide-progress":"")},s.a.createElement("div",{className:"progress-bar progress-bar-striped m-0",style:{width:a.progress}}))),s.a.createElement("div",{className:"action"},r)))})),s.a.createElement("div",{className:"fileUpload"},s.a.createElement("div",{className:"d-flex align-items-center mt-3"},s.a.createElement("div",null,s.a.createElement("label",{className:"font-weight-bold mx-3 my-4"},"Attachments:")),s.a.createElement("div",null,s.a.createElement("button",{className:"btn blue",onClick:this.selectFilesHandler},s.a.createElement("i",{className:"fa fa-plus"})))),s.a.createElement("div",{className:"files"},t))}}]),t}(n.Component),D=a(24),H=a(94),M=a(95),q=a.n(M),L=a(57),A=a.n(L),F=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.subject=document.querySelector("#subject"),a.files=document.querySelector(".files"),a.draftId=a.props.match.params.id,localStorage.setItem("currDraft",a.draftId),j.get("api/draft/"+a.draftId+"/").then(function(e){e=e.data,a.html2Draft(e.body),a.subject.value=e.subject,console.log(e),a.setState(Object(g.a)({},a.state,e))})},a.onEditorStateChange=function(e){a.setState({editorState:e})},a.draft2Html=function(){var e=a.state.editorState;return q()(Object(D.convertToRaw)(e.getCurrentContent()))},a.html2Draft=function(e){var t=A()(e);if(t){var n=D.ContentState.createFromBlockArray(t.contentBlocks),s=D.EditorState.createWithContent(n);a.setState({editorState:s})}},a.saveDraftHandler=function(e,t){e.preventDefault(),j.put("api/draft/"+a.draftId+"/",{subject:a.subject.value,body:a.draft2Html()}).then(function(e){t||a.props.history.push("/admin/email/")})},a.sendMailHandler=function(){var e=Object(k.a)(x.a.mark(function e(t){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.saveDraftHandler(t,!0);case 3:j.post("api/outbox/",{draft:localStorage.getItem("currDraft")}).then(function(e){console.log(e.data),a.props.history.push("/admin/email/")});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.deleteDraftHandler=function(e){e.preventDefault(),j.delete("api/draft/"+a.draftId+"/").then(function(e){console.log(e.data),a.props.history.push("/admin/email/")})};var n=A()("<p>loading please wait...</p>");if(n){var s=D.ContentState.createFromBlockArray(n.contentBlocks),r=D.EditorState.createWithContent(s);a.state={editorState:r,files:!1}}return a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=s.a.createElement("h1",null,this.draftId?"Edit Mail":"New Email");if(this.state.status){e=s.a.createElement("div",{className:"mb-5"},s.a.createElement("h1",{className:""},1===this.state.status?"Mail in outbox":"Sent mail"," id: ",this.state.id),s.a.createElement("div",{className:"text-muted"},s.a.createElement("div",null,"Sending to ",this.state.sentTo," subscribers"),s.a.createElement("div",null,"Last edit on at ",this.state.edited_on)));var t=document.querySelector(".body");t.innerHTML=this.state.body;var a=this.state.files;if(a.length){t.innerHTML+='<p class="font-weight-bold">Attachments:</p>';for(var n=0;n<a.length;n++)t.innerHTML+="<a href='".concat(this.state.files[n].file,"' class='d-block' target='_blank' download>\n                        ").concat(a[n].file.split("/").pop(),"\n                    </a>")}}return s.a.createElement("div",{className:"newMail p-5"},s.a.createElement("form",{className:"ml-3"},s.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},e,s.a.createElement("div",{className:"buttons py-3 ".concat(this.state.status?"d-none":"d-flex")},s.a.createElement("button",{className:"btn btn-outline-danger mr-3",onClick:this.deleteDraftHandler},"delete"),s.a.createElement("button",{className:"btn mr-3",onClick:this.saveDraftHandler},"save"),s.a.createElement("button",{className:"btn btn-success",onClick:this.sendMailHandler},"send"))),s.a.createElement("div",{className:"form-group mt-3"},s.a.createElement("label",{htmlFor:"subject",className:"font-weight-bold"},"Subject:"),s.a.createElement("input",{status:this.state.status,type:"text",id:"subject",className:"form-control w-100"})),s.a.createElement("label",{className:"font-weight-bold mt-2"},"Body:"),s.a.createElement("div",{className:"body"},s.a.createElement(H.Editor,{status:this.state.status,editorState:this.state.editorState,onEditorStateChange:this.onEditorStateChange})),this.state.files&&!this.state.status?s.a.createElement(C,{draftId:this.draftId,initialFiles:this.state.files}):""))}}]),t}(n.Component),T=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={drafts:[]},a.componentDidMount=function(){j.get("api/draft/").then(function(e){e=e.data,a.setState({drafts:e.filter(function(e){return 1===e.status})})}).catch(function(e){return console.error(e)})},a.createDraftView=function(e,t){return s.a.createElement("div",{className:"d-flex align-items-center justify-content-between draft",key:e.id},s.a.createElement("div",{className:"d-flex align-items-center"},s.a.createElement("div",{className:"srno font-weight-bold"},t+1),s.a.createElement("div",{className:"subject"},e.subject),s.a.createElement("div",{className:"date"},"(",e.edited_on,")")),s.a.createElement("div",{className:"d-flex align-items-center"},s.a.createElement("button",{onClick:function(t){return a.send2EditHandler(t,e.id)},className:"btn blue"},s.a.createElement("i",{className:"fas fa-glasses"}))))},a.send2EditHandler=function(e,t){e.preventDefault(),a.props.history.push("/admin/newMail/".concat(t,"/"))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.drafts;return t=t.map(function(t,a){return e.createDraftView(t,a)}),s.a.createElement("div",{className:"email p-5"},s.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},s.a.createElement("h1",{className:""},"Outbox"),s.a.createElement("div",null)),s.a.createElement("div",{className:"d-flex text-muted"},s.a.createElement("div",{className:"p-3"},s.a.createElement("span",{className:"font-weight-bold"},"Total mail on outbox: "),this.state.drafts.length)),s.a.createElement("div",{className:"mt-5"}),s.a.createElement("div",null,t))}}]),t}(n.Component),I=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={drafts:[]},a.componentDidMount=function(){j.get("api/draft/").then(function(e){e=e.data,a.setState({drafts:e.filter(function(e){return 2===e.status})}),console.log(e)}).catch(function(e){return console.error(e)})},a.createDraftView=function(e,t){return s.a.createElement("div",{className:"d-flex align-items-center justify-content-between draft",key:e.id},s.a.createElement("div",{className:"d-flex align-items-center"},s.a.createElement("div",{className:"srno font-weight-bold"},t+1),s.a.createElement("div",{className:"subject"},e.subject)),s.a.createElement("div",{className:"d-flex align-items-center"},s.a.createElement("button",{onClick:function(t){return a.send2EditHandler(t,e.id)},className:"btn blue"},s.a.createElement("i",{className:"fas fa-glasses"})),s.a.createElement("button",{onClick:function(t){return a.deleteDraftHandler(t,e.id)},className:"btn red"},s.a.createElement("i",{className:"fas fa-trash"}))))},a.deleteDraftHandler=function(e,t){e.preventDefault(),t||(t=e.target.parentElement.parentElement.dataset.sid),j.delete("api/draft/"+t+"/").then(function(e){var n=a.state.drafts.filter(function(e){return e.id!==Number(t)});a.setState({drafts:n})}).catch(function(e){return console.error(e)}),console.log(t)},a.send2EditHandler=function(e,t){e.preventDefault(),a.props.history.push("/admin/newMail/".concat(t,"/"))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.drafts;return t=t.map(function(t,a){return e.createDraftView(t,a)}),s.a.createElement("div",{className:"email p-5"},s.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},s.a.createElement("h1",{className:""},"SentMail"),s.a.createElement("div",null)),s.a.createElement("div",{className:"d-flex text-muted"},s.a.createElement("div",{className:"p-3"},s.a.createElement("span",{className:"font-weight-bold"},"Total mails sent: "),this.state.drafts.length)),s.a.createElement("div",{className:"mt-5"}),s.a.createElement("div",null,t))}}]),t}(n.Component),W=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,"settings")}}]),t}(n.Component),U=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,"signout")}}]),t}(n.Component),R=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={progress:0,onprogress:!1},a.selectFilesHandler=function(e){e.preventDefault();var t=document.createElement("input");t.type="file",t.accept=".csv",t.click(),t.addEventListener("change",function(e){var t=e.target.files[0];a.uploadFileHandler(t)})},a.uploadFileHandler=function(e){var t=new FormData,n=new XMLHttpRequest;console.log(a.props),t.append("group_id",a.props.selected_group_id),t.append("file",e),n.addEventListener("load",function(e){var t=e.target.response;console.log(t),a.props.get_subs(),a.props.update_groups(),a.setState(Object(g.a)({},a.state,{onprogress:!1}))}),n.upload.addEventListener("progress",function(e){var t=e.loaded/e.total*100;console.log(t),a.setState(Object(g.a)({},a.state,{progress:t}))}),n.responseType="json",n.open("post",N+"api/sub_as_csv/"),n.send(t),a.setState(Object(g.a)({},a.state,{progress:!0}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.onprogress?String(this.state.progress)+" %":s.a.createElement("i",{className:"fa fa-upload"});return s.a.createElement("div",{className:""},s.a.createElement("div",{className:"new_sub_csv d-flex justify-content-between align-items-center"},s.a.createElement("div",{className:"text-left"},"Upload a .csv with fields email, name, mobile"),s.a.createElement("button",{disabled:!!this.state.onprogress,onClick:this.selectFilesHandler,className:"btn nbtn green"},e)))}}]),t}(n.Component),V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={},a.componentDidMount=function(){a.new_sub=document.querySelector(".new_sub"),a.new_sub_name=a.new_sub.querySelector(".new_sub_name"),a.new_sub_email=a.new_sub.querySelector(".new_sub_email"),a.new_sub_mobile=a.new_sub.querySelector(".new_sub_mobile"),console.log(a.props)},a.add_sub_to_group_handler=function(e){e.preventDefault(),j.post("api/add_sub_to_group/",{groupId:a.props.selected_group_id,name:a.new_sub_name.value,email:a.new_sub_email.value,mobile:a.new_sub_mobile.value}).then(function(e){a.props.get_subs(),a.props.update_groups()})},a.delete_group_handler=function(e){if(e.preventDefault(),"all"!==a.props.selected_group_name){var t=a.props.selected_group_id;a.props.set_groups_state({selected_group_id:null,selected_group_name:"all"}),j.delete("api/group/".concat(t,"/")).then(function(e){console.log(e.data),a.props.update_groups()})}},a.download_group_csv_handler=function(){var e=document.createElement("a");e.href=N+"api/download_group_as_csv/".concat(a.props.selected_group_id,"/"),e.click()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=s.a.createElement("form",{autoComplete:"false",className:"d-flex new_sub align-items-center px-1 py-2",key:1},s.a.createElement("div",{className:"flex-grow-1 d-flex align-items-center justify-content-between"},s.a.createElement("input",{type:"email",className:"new_sub_email tab_input tab_input_sm",placeholder:"email",autoFocus:!0}),s.a.createElement("input",{type:"text",className:"new_sub_name tab_input tab_input_sm",placeholder:"username"}),s.a.createElement("input",{type:"mobile",className:"new_sub_mobile tab_input tab_input_sm",placeholder:"mobile no."})),s.a.createElement("div",{className:"create-sub create"},s.a.createElement("button",{onClick:this.add_sub_to_group_handler,className:"btn nbtn green"},s.a.createElement("i",{className:"fa fa-plus"}))));return s.a.createElement("div",{className:"toolbar tab p-3"},s.a.createElement("div",null,s.a.createElement("div",{className:"font-weight-bold"},"New subscriber:"),e),s.a.createElement("div",null,s.a.createElement("div",{className:"font-weight-bold mt-2"},"Upload subscribers as CSV:"),s.a.createElement(R,this.props)),s.a.createElement("div",null,s.a.createElement("div",{className:"font-weight-bold mt-2"},"Download subscribers as CSV:"),s.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},s.a.createElement("div",null,"Click here to download .csv of the subscribers of this group"),s.a.createElement("button",{onClick:this.download_group_csv_handler,className:"btn nbtn blue"},s.a.createElement("i",{className:"fa fa-download"})))),s.a.createElement("div",null,s.a.createElement("div",{className:"font-weight-bold mt-2"},"Delete current group:"),s.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},s.a.createElement("div",null,"This will only delete the group not the subscribers"),s.a.createElement("button",{disabled:"all"===this.props.selected_group_name,onClick:this.delete_group_handler,className:"btn nbtn red"},s.a.createElement("i",{className:"fa fa-trash"})))))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.get_subs()},a.get_subs=function(){j.get("api/group/".concat(a.props.selected_group_id,"/")).then(function(e){console.log(e.data),a.setState(Object(g.a)({},a.state,e.data,{page:1,group_id:a.props.selected_group_id}))})},a.flag_sub_handler=function(e,t){e.preventDefault(),j.delete("api/subscribe/".concat(t.id,"/")).then(function(e){console.log("flagged"),1===a.state.results.length&&a.state.page>1&&a.setState(Object(g.a)({},a.state,{page:a.state.page-1})),a.get_subs(),a.props.update_groups()})},a.change_page=function(e,t){var n;e.preventDefault();var s=a.state.page;if(t)n=a.state.next,s+=1;else{if(t)return;n=a.state.previous,s-=1}j.get(n).then(function(e){console.log(e),a.setState(Object(g.a)({},a.state,e.data,{page:s}))})},a.state={next:null,previous:null,results:[],page:1,upload_subs:0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;this.state.group_id!==this.props.selected_group_id&&this.get_subs();var t=this.state.results.map(function(t,a){return s.a.createElement("div",{className:"d-flex tab align-items-center ",key:a+1},s.a.createElement("div",{className:"sub_sno px-2 font-weight-bold"},a+1),s.a.createElement("div",{className:"sub_phone px-2"},s.a.createElement("i",{className:"fa fa-circle ".concat(t.verified?"text-success":"text-danger")})),s.a.createElement("div",{className:"sub_email px-2"},t.email),s.a.createElement("div",{className:"sub_name px-2"},t.name),s.a.createElement("div",{className:"sub_phone px-2 flex-grow-1"},t.mobile),s.a.createElement("button",{onClick:function(a){return e.flag_sub_handler(a,t)},className:"btn nbtn red"},s.a.createElement("i",{className:"fa fa-times"})))}),a=s.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},s.a.createElement("div",{className:"font-weight-bold p-3"},"Subscribers: ",this.state.count),s.a.createElement("div",{className:"sub-pagination pagination"},s.a.createElement("span",{className:"mx-1"},"Page ",this.state.page),s.a.createElement("button",{disabled:!this.state.previous,onClick:function(t){return e.change_page(t,0)},className:"btn nbtn blue mx-1"},s.a.createElement("i",{className:"fa fa-angle-left"})),s.a.createElement("button",{disabled:!this.state.next,onClick:function(t){return e.change_page(t,1)},className:"btn nbtn blue mx-1"},s.a.createElement("i",{className:"fa fa-angle-right"}))));return s.a.createElement("div",null,s.a.createElement("div",{className:""},s.a.createElement(V,Object.assign({},this.props,{get_subs:this.get_subs})),a,t,this.state.results.length>10?a:null))}}]),t}(n.Component),P=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={groups:[],new_group_name:"",selected_group_id:null,selected_group_name:"all"},a.componentDidMount=function(){a.get_groups()},a.get_groups=function(){j.get("api/group/").then(function(e){var t=(e=e.data).filter(function(e){return e.name===a.state.selected_group_name})[0];console.log(e,a.state,t),a.setState(Object(g.a)({},a.state,{groups:e,selected_group_id:t.id,selected_group_name:t.name}))}).catch(function(e){return console.error(e)})},a.delete=function(e,t){e.preventDefault(),j.delete("api/group/".concat(t)).then(function(e){e=e.data,a.setState({groups:a.state.groups.filter(function(e){return e.id!==t})})}).catch(function(e){return console.error(e)})},a.new_group=function(e){e.preventDefault(),a.state.new_group_name&&j.post("api/group/",{name:a.state.new_group_name}).then(function(e){console.log(e.data),a.setState({groups:[].concat(Object(S.a)(a.state.groups),[e.data]),new_group_name:""})}).catch(function(e){return console.error(e)})},a.show_group=function(e,t){a.setState(Object(g.a)({},a.state,{selected_group_id:t.id,selected_group_name:t.name}))},a.set_groups_state=function(e){a.setState(Object(g.a)({},a.state,e))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.groups.map(function(t,a){return s.a.createElement("div",{className:"d-flex tab align-items-center \n                ".concat(t.id===e.state.selected_group_id?"active-group":"","\n            "),key:a+2},s.a.createElement("div",{className:"group-name px-2 flex-grow-1",onClick:function(a){return e.show_group(a,t)}},t.name),s.a.createElement("div",{className:"ml-2 badge badge-pill badge-secondary "},t.subs))}),a=s.a.createElement("form",{className:"d-flex tab align-items-center new-group",key:1},s.a.createElement("div",{className:"flex-grow-1 pl-2"},s.a.createElement("input",{onChange:function(t){return e.setState(Object(g.a)({},e.state,{new_group_name:t.target.value}))},value:this.state.new_group_name,type:"text",className:"new_group_name tab_input",placeholder:"create group",autoFocus:!0})),s.a.createElement("div",{className:"create-group create px-1"},s.a.createElement("button",{onClick:this.new_group,className:"btn nbtn green"},s.a.createElement("i",{className:"fa fa-plus"}))));return s.a.createElement("div",{className:"subscribers px-5 pb-5 pt-3"},s.a.createElement("div",{className:"subs row"},s.a.createElement("div",{className:"col-md-9"},this.state.selected_group_id?s.a.createElement(B,{set_groups_state:this.set_groups_state,update_groups:this.get_groups,selected_group_name:this.state.selected_group_name,selected_group_id:this.state.selected_group_id}):""),s.a.createElement("div",{className:"col-md-3 groups-container"},s.a.createElement("div",{className:"groups-list"},s.a.createElement("div",{className:"text-muted p-3 font-weight-bold"},"Total groups: ",this.state.groups.length),a,t))))}}]),t}(n.Component),Z=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"admin"},s.a.createElement(v,null),s.a.createElement(d.a,null,s.a.createElement(p.a,{path:"/admin/group/:id/",component:B}),s.a.createElement(p.a,{path:"/admin/group/",component:P}),s.a.createElement(p.a,{path:"/admin/email/:id/",component:F}),s.a.createElement(p.a,{path:"/admin/email/",component:O}),s.a.createElement(p.a,{path:"/admin/outbox/",component:T}),s.a.createElement(p.a,{path:"/admin/sent/",component:I}),s.a.createElement(p.a,{path:"/admin/settings/",component:W}),s.a.createElement(p.a,{path:"/admin/signout/",component:U})))}}]),t}(n.Component),J=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"big_menubar d-none d-md-flex align-items-center justify-content-between"},s.a.createElement(f.a,{to:"/"},s.a.createElement("div",{className:"brand d-flex align-items-center"},s.a.createElement("div",{className:"brand_logo mx-3"},s.a.createElement("img",{src:a(221),alt:""})),s.a.createElement("div",{className:"brand_name"},"Brandname"))),s.a.createElement(d.a,null,s.a.createElement(p.a,{path:"/:page/",component:function(){return s.a.createElement("div",{className:"links d-flex"},s.a.createElement("div",{className:"link mr-3"},s.a.createElement(f.a,{to:"/about/",className:"active"},"About Us")),s.a.createElement("div",{className:"link mr-3"},s.a.createElement(f.a,{to:"/services/"},"Services")),s.a.createElement("div",{className:"link mr-3"},s.a.createElement(f.a,{to:"/clients/"},"Our Clients")),s.a.createElement("div",{className:"link mr-3"},s.a.createElement(f.a,{to:"/newsfeed/"},"Newfeed")),s.a.createElement("div",{className:"link mr-3"},s.a.createElement(f.a,{to:"/subscribe/"},"Subscribe")),s.a.createElement("div",{className:"link mr-3"},s.a.createElement(f.a,{to:"/contactus/"},"Contact Us")))}}),s.a.createElement(p.a,{path:"/",component:function(){return s.a.createElement("div",{className:"links d-flex"},s.a.createElement("div",{className:"link mr-3"},s.a.createElement(f.a,{to:"/getStarted/",className:"active get-started"},"Get Started")),s.a.createElement("div",{className:"link mr-3"},s.a.createElement(f.a,{to:"/newsfeed/",className:""},"Newfeed")))}}))))}}]),t}(n.Component),X=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=s.a.createElement("div",null,s.a.createElement("div",{className:"px-5 pb-5 ml-5 catch-phrase display-3"},"A catch phrase for the company goes here"),s.a.createElement("div",{className:"px-5 pb-5 ml-5 text-secondary brief "},"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Numquam nostrum libero animi sunt minus, voluptas delectus beatae atque impedit consectetur"),s.a.createElement("div",{className:"home-link text-center mb-5"},s.a.createElement(f.a,{to:"/home/"},"Continue")));return s.a.createElement("div",{className:"get-started row mx-0 align-items-center"},s.a.createElement("div",{className:"col-md-6"},e),s.a.createElement("div",{className:"col-md-6 cover-img"},e))}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).changeTabHandler=function(e){e.preventDefault(),console.log(e.target.innerHTML)},a.componentDidMount=function(){var e=document.querySelectorAll(".main .tabs div"),t=document.querySelectorAll(".main .content div");e.forEach(function(a,n){a.addEventListener("click",function(a){t.forEach(function(e){return e.style.display="none"}),e.forEach(function(e){return e.classList.remove("active")}),t[n].style.display="block",e[n].classList.add("active")})})},a.text=s.a.createElement("div",null,s.a.createElement("div",{className:"tabs d-flex mt-5 mx-5"},s.a.createElement("div",{className:"active"},"Mission"),s.a.createElement("div",null,"Who we are"),s.a.createElement("div",null,"Our History")),s.a.createElement("div",{className:"m-5 content"},s.a.createElement("div",null,"Mission Lorem ipsum dolor sit amet consectetur adipisicing elit. Ratione ex id quam optio iste ipsum necessitatibus reprehenderit officiis esse quia aliquid exercitationem iusto laboriosam, accusantium delectus culpa mollitia. Alias, saepe quos voluptatem magnam necessitatibus nobis odio labore enim ad cumque iusto, cum at sint. Animi quae maiores corrupti ipsum quam."),s.a.createElement("div",null,"who we are"),s.a.createElement("div",null,"history"))),a.state={currTab:"Mission"},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"about row mx-0"},s.a.createElement("div",{className:"main col-md-6"},this.text),s.a.createElement("div",{className:"col-md-6 about-img"},this.text))}}]),t}(n.Component),K=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,"clients")}}]),t}(n.Component),Q=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,"contact")}}]),t}(n.Component),$=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,"footer")}}]),t}(n.Component),z=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,"news")}}]),t}(n.Component),Y=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,"services")}}]),t}(n.Component),ee=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={saved:!1,verified:!1},a.componentDidMount=function(){a.subscribe=document.querySelector("#subscribe")},a.SubscribeHandler=function(e){e.preventDefault();var t=a.subscribe.querySelector("#subName"),n=a.subscribe.querySelector("#subMobile"),s=a.subscribe.querySelector("#subEmail"),r={name:t.value,mobile:n.value,email:s.value};j.post("api/subscriber/",r).then(function(e){var t=e.data;console.log(t),t.id&&(a.setState(Object(g.a)({},a.state,t,{saved:!0})),t.verified||a.sendOtpHandler())})},a.sendOtpHandler=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.preventDefault(),j.post("api/sendOtp/",{id:a.state.id}).then(function(e){console.log(e.data)}).catch(function(e){console.error(e)})},a.VerifyOtpHandler=function(e){e.preventDefault();var t=a.subscribe.querySelector("#otp");j.post("api/verifyOtp/",{otp:t.value,id:a.state.id}).then(function(e){console.log(e.data),a.setState(Object(g.a)({},a.state,e.data))}).catch(function(e){console.error(e)})},a.wrongMailHandler=function(e){e.preventDefault(),j.delete("api/subscriber/".concat(a.state.id,"/")).then(function(e){console.log(e.data),a.setState(Object(g.a)({},a.state,{saved:!1}))}).catch(function(e){console.error(e)})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=s.a.createElement("div",null,s.a.createElement("input",{type:"text",id:"subName",placeholder:"name"}),s.a.createElement("input",{type:"text",id:"subMobile",placeholder:"mobile"}),s.a.createElement("input",{type:"email",id:"subEmail",placeholder:"email"}),s.a.createElement("input",{type:"submit",onClick:this.SubscribeHandler})),t=s.a.createElement("div",null,this.state.email,this.state.verified?"verification success":"not yet verified ",s.a.createElement("input",{type:"text",placeholder:"otp",id:"otp"}),s.a.createElement("input",{type:"submit",onClick:this.VerifyOtpHandler}),s.a.createElement("button",{className:"btn btn-sm btn-outline-primary",onClick:this.sendOtpHandler},"resend otp"),s.a.createElement("button",{className:"btn btn-sm btn-outline-danger",onClick:this.wrongMailHandler},"wrong email?"));return s.a.createElement("form",{id:"subscribe",className:"my-5"},this.state.saved?t:e)}}]),t}(n.Component),te=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"index"},s.a.createElement(G,null),s.a.createElement(z,null),s.a.createElement(Y,null),s.a.createElement(K,null),s.a.createElement(ee,null),s.a.createElement(Q,null),s.a.createElement($,null))}}]),t}(n.Component),ae=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"index"},s.a.createElement(J,null),s.a.createElement(d.a,null,s.a.createElement(p.a,{path:"/home/",component:te}),s.a.createElement(p.a,{path:"/",component:X})))}}]),t}(n.Component),ne=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"app"},s.a.createElement(d.a,null,s.a.createElement(p.a,{path:"/admin",component:Z}),s.a.createElement(p.a,{path:"/",component:ae})),s.a.createElement("link",{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.6.3/css/all.css",integrity:"sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/",crossOrigin:"anonymous"}))}}]),t}(n.Component),se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function re(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var le=a(225);l.a.render(s.a.createElement(le.a,null,s.a.createElement(ne,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");se?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):re(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):re(t,e)})}}()},96:function(e,t,a){e.exports=a(222)}},[[96,2,1]]]);
//# sourceMappingURL=main.872bf27f.chunk.js.map