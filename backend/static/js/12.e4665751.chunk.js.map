{"version":3,"sources":["admin/complaints/complaints.js"],"names":["news","axios","faxios","state","results","page","selected_category","componentDidMount","_this","get_records","url","concat","get","then","d","data","console","log","setState","Object","_home_deepti_Desktop_zen_ca_mail_frontend_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","_reactivate_sub","e","sub","preventDefault","put","id","status","flag","email","group","change_page","pgno","next","previous","_this2","this","map","draft","i","p","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","key","show","created_on","slice","onClick","createDraftView","selected_category_name","pagination","count","disabled","length","Component"],"mappings":"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","file":"static/js/12.e4665751.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport faxios from '../../axios'; \n\nexport default class news extends Component {\n    axios = faxios()\n    state = {\n        results: [], // keeps the list of new objects\n        page: 1, // keeps track of pages\n        selected_category: -1 // -1 refers to category all\n    }\n\n    componentDidMount = () => {\n        this.get_records()\n    }\n\n    get_records = () => {\n        let url = `api/complaint_mails/?page=${this.state.page}`\n\n        this.axios.get(url)\n            .then(d => {\n                d = d.data\n                console.log(d)\n\n                this.setState({\n                    ...this.state,\n                    ...d,\n                })\n            })\n    }\n\n\n    _reactivate_sub = (e, sub) => {\n        e.preventDefault()\n        this.axios.put(`api/all_subs/${sub.id}/`, {\n            status: 'available',\n            flag: false,\n            email: sub.email,\n            group: sub.group\n        }).then(d => {\n            this.get_records() \n        })\n    }\n\n\n    change_page = (e, id) => {\n        e.preventDefault()\n        let url\n        let pgno = this.state.page\n\n\n        if (id) {\n            url = this.state.next\n            pgno += 1\n        } else if (!id) {\n            url = this.state.previous\n            pgno -= 1\n        } else {\n            return\n        }\n\n        this.axios.get(url)\n            .then(d => {\n                console.log(d)\n                this.setState({\n                    ...this.state,\n                    ...d.data,\n                    page: pgno\n                })// end of setstate\n            })\n    }\n\n    render() {\n\n        let createDraftView = (p, i) => (\n            <div className='d-flex flex-wrap tab align-items-center justify-content-between news' key={p.id}>\n                <div className='d-flex ml-auto flex-wrap align-items-center mx-2 flex-grow-1'>\n                    <div className={p.show ? 'text-success' : 'text-danger'}>\n                        <i className=\"fa fa-circle\"></i>\n                    </div>\n                    <div className='srno mx-2 font-weight-bold'>{i + 1}</div>\n                    <div className='subject mx-2 flex-grow-1'>{p.email}</div>\n                    <div className='date mx-2 text-muted'>({p.created_on.slice(0, 10)})</div>\n                </div>\n                <div>\n                    <button onClick={e => this._reactivate_sub(e,p)}  className=\"btn nbtn green\">\n                        <i className=\"fa fa-check\"></i>\n                    </button>\n                </div>\n            </div >\n        )\n\n        let news = this.state.results\n        news = news.map((draft, i) => createDraftView(draft, i))\n\n        let category_names = ['Total', 'Displayed', 'Archieved']\n        let selected_category_name = category_names[this.state.selected_category + 1]\n\n        let pagination =\n            <div className=\"d-flex justify-content-between align-items-center\">\n                <div className=\"font-weight-bold p-3\">{selected_category_name}: {this.state.count}</div>\n                <div className=\"sub-pagination pagination\">\n                    <span className='mx-1'>\n                        Page {this.state.page}\n                    </span>\n                    <button\n                        disabled={this.state.previous ? false : true}\n                        onClick={e => this.change_page(e, 0)}\n                        className=\"btn nbtn blue mx-1\">\n                        <i className=\"fa fa-angle-left\"></i>\n                    </button>\n                    <button\n                        disabled={this.state.next ? false : true}\n                        onClick={e => this.change_page(e, 1)}\n                        className=\"btn nbtn blue mx-1\">\n                        <i className=\"fa fa-angle-right\"></i>\n                    </button>\n                </div>\n            </div>\n\n        return (\n            <div className='newss'>\n                <div className=\"row\">\n                    <div className='col-md-9 order-2 order-md-1'>\n                        {pagination}\n                        {news}\n                        {this.state.results.length > 10 ?\n                            pagination : ''}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n"],"sourceRoot":""}