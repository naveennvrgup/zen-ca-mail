{"version":3,"sources":["admin/bounces/bounces.js"],"names":["news","axios","faxios","state","results","page","selected_category","componentDidMount","_this","get_records","url","concat","get","then","d","data","console","log","setState","Object","_home_naveensundar_Desktop_zen_ca_mail_frontend_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","change_page","e","id","preventDefault","pgno","next","previous","_unblock_subscriber","sub","put","status","flag","email","group","_edit_subscriber","sub_id","subs","selected_sub_index","findIndex","onedit","_edit_sub_change","inputname","target","value","_delete_subscriber","delete","length","_this2","this","subs_list","map","i","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","key","type","placeholder","onChange","name","mobile","onClick","edit_subscriber_html","show_subscriber_html","selected_category_name","pagination","count","disabled","Component"],"mappings":"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","file":"static/js/13.55fe48f3.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport faxios from '../../axios'; \n\nexport default class news extends Component {\n    axios = faxios()\n    state = {\n        results: [], // keeps the list of new objects\n        page: 1, // keeps track of pages\n        selected_category: -1 // -1 refers to category all\n    }\n\n    componentDidMount = () => {\n        this.get_records()\n    }\n\n    get_records = () => {\n        let url = `api/bounced_mails/?page=${this.state.page}`\n\n        this.axios.get(url)\n            .then(d => {\n                d = d.data\n                console.log(d)\n\n                this.setState({\n                    ...this.state,\n                    ...d,\n                })\n            })\n    }\n\n\n    change_page = (e, id) => {\n        e.preventDefault()\n        let url\n        let pgno = this.state.page\n\n\n        if (id) {\n            url = this.state.next\n            pgno += 1\n        } else if (!id) {\n            url = this.state.previous\n            pgno -= 1\n        } else {\n            return\n        }\n\n        this.axios.get(url)\n            .then(d => {\n                console.log(d)\n                this.setState({\n                    ...this.state,\n                    ...d.data,\n                    page: pgno\n                })// end of setstate\n            })\n    }\n\n    _unblock_subscriber  = (e,sub) => {\n        e.preventDefault()\n        this.axios.put(`api/all_subs/${sub.id}/`, {\n            status: 'available',\n            flag: false,\n            email: sub.email,\n            group: sub.group\n        }).then(d => {\n            this.get_records() \n        })\n    }     \n\n    _edit_subscriber = (e,sub_id) => {\n        e.preventDefault()\n\n        let subs = this.state.results\n        const selected_sub_index = subs.findIndex(sub => sub.id===sub_id)\n        subs[selected_sub_index].onedit = true\n        this.setState({\n            results: subs\n        })\n\n        console.log(subs)\n    }\n\n    _edit_sub_change = (e, inputname, sub_id) => {\n        e.preventDefault()\n\n        let subs = this.state.results\n        const selected_sub_index = subs.findIndex(sub => sub.id===sub_id)\n        subs[selected_sub_index][inputname] = e.target.value\n        this.setState({\n            results: subs\n        })\n    }\n\n    _delete_subscriber = (e, sub) => {\n        e.preventDefault()\n\n        this.axios.delete(`api/all_subs/${sub.id}/`)\n            .then(d => {\n                console.log('flagged')\n                if (this.state.results.length === 1 && this.state.page > 1) {\n                    this.setState({\n                        ...this.state,\n                        page: this.state.page - 1\n                    })// end of setstate\n                }\n                this.get_records()\n            })\n    }\n\n    render() {\n\n        let show_subscriber_html =  (sub,i) =>       \n        <div className={'d-flex  tab align-items-center '} key={i + 1}>\n            <div className='sub_sno px-2 font-weight-bold'>{i + 1}</div>\n            <div className='sub_phone px-2'>\n                <i className={`fa fa-circle ${sub.status === 'available' ? 'text-success' : 'text-danger'}`}></i>\n            </div>\n            <div className='sub_email px-2'>{sub.email}</div>\n            <div className='sub_name px-2'>{sub.name}</div>\n            <div className='sub_phone px-2 flex-grow-1'>{sub.mobile}</div>\n            {sub.status !== 'available' ? <button\n                onClick={e => this._unblock_subscriber(e, sub)}\n                className={`btn mx-1 nbtn green`}>\n                <i className='fa fa-check'></i>\n            </button> : null}\n            <button\n                onClick={e => this._edit_subscriber(e, sub.id)}\n                className={`btn mx-1 nbtn blue`}>\n                <i className='fa fa-pen'></i>\n            </button>\n            <button\n                onClick={e => this._delete_subscriber(e, sub)}\n                className={`btn mx-1 nbtn red`}>\n                <i className='fa fa-trash'></i>\n            </button>\n        </div>  \n\n        let edit_subscriber_html = (sub,i) =>    \n        <div className={'d-flex  tab align-items-center '} key={i + 1}>\n            <div className='sub_sno px-2 font-weight-bold'>{i + 1}</div>\n            <div className='sub_phone px-2'>\n                <i className={`fa fa-circle ${sub.status === 'available' ? 'text-success' : 'text-danger'}`}></i>\n            </div>\n            <div className='sub_email px-2'><input type=\"email\" placeholder='Email' onChange={e=>this._edit_sub_change(e,'email', sub.id)} value={sub.email}/></div>\n            <div className='sub_name px-2'><input type=\"text\" placeholder='Name' onChange={e=>this._edit_sub_change(e,'name', sub.id)} value={sub.name}/></div>\n            <div className='sub_phone px-2 flex-grow-1'><input type=\"text\" placeholder='Phone no.' onChange={e=>this._edit_sub_change(e,'mobile', sub.id)} value={sub.mobile}/></div>\n            <button\n                onClick={e => this._unblock_subscriber(e, sub)}\n                className={`btn mx-1 nbtn green`}>\n                <i className='fa fa-check'></i>\n            </button>\n        </div>\n\n\n        let subs = this.state.results\n        let subs_list = subs.map((sub, i) => {\n            if(sub.onedit === true){\n                return edit_subscriber_html(sub,i)\n            }else {\n                return show_subscriber_html(sub,i)\n            }\n        })\n\n        let category_names = ['Total', 'Displayed', 'Archieved']\n        let selected_category_name = category_names[this.state.selected_category + 1]\n\n        let pagination =\n            <div className=\"d-flex justify-content-between align-items-center\">\n                <div className=\"font-weight-bold p-3\">{selected_category_name}: {this.state.count}</div>\n                <div className=\"sub-pagination pagination\">\n                    <span className='mx-1'>\n                        Page {this.state.page}\n                    </span>\n                    <button\n                        disabled={this.state.previous ? false : true}\n                        onClick={e => this.change_page(e, 0)}\n                        className=\"btn nbtn blue mx-1\">\n                        <i className=\"fa fa-angle-left\"></i>\n                    </button>\n                    <button\n                        disabled={this.state.next ? false : true}\n                        onClick={e => this.change_page(e, 1)}\n                        className=\"btn nbtn blue mx-1\">\n                        <i className=\"fa fa-angle-right\"></i>\n                    </button>\n                </div>\n            </div>\n\n        return (\n            <div className='newss'>\n                <div className=\"row\">\n                    <div className='col-md-9 order-2 order-md-1'>\n                        {pagination}\n                        {subs_list}\n                        {this.state.results.length > 10 ?\n                            pagination : ''}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n"],"sourceRoot":""}